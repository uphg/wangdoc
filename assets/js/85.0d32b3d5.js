(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{525:function(a,s,e){"use strict";e.r(s);var t=e(76),v=Object(t.a)({},(function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"bash-变量"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#bash-变量"}},[a._v("#")]),a._v(" Bash 变量")]),a._v(" "),e("h2",{attrs:{id:"简介"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[a._v("#")]),a._v(" 简介")]),a._v(" "),e("p",[a._v("Bash 变量分成环境变量和自定义变量两类。")]),a._v(" "),e("h3",{attrs:{id:"环境变量"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#环境变量"}},[a._v("#")]),a._v(" 环境变量")]),a._v(" "),e("p",[a._v("环境变量是 Bash 环境自带的变量，进入 Shell 时已经定义好了，可以直接使用。它们通常是系统定义好的，也可以由用户从父 Shell 传入子 Shell。")]),a._v(" "),e("p",[e("code",[a._v("env")]),a._v("命令或"),e("code",[a._v("printenv")]),a._v("命令，可以显示所有环境变量。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("env")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 或者")]),a._v("\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("printenv")]),a._v("\n")])])]),e("p",[a._v("下面是一些常见的环境变量。")]),a._v(" "),e("ul",[e("li",[e("code",[a._v("BASHPID")]),a._v("：Bash 进程的进程 ID。")]),a._v(" "),e("li",[e("code",[a._v("BASHOPTS")]),a._v("：当前 Shell 的参数，可以用"),e("code",[a._v("shopt")]),a._v("命令修改。")]),a._v(" "),e("li",[e("code",[a._v("DISPLAY")]),a._v("：图形环境的显示器名字，通常是"),e("code",[a._v(":0")]),a._v("，表示 X Server 的第一个显示器。")]),a._v(" "),e("li",[e("code",[a._v("EDITOR")]),a._v("：默认的文本编辑器。")]),a._v(" "),e("li",[e("code",[a._v("HOME")]),a._v("：用户的主目录。")]),a._v(" "),e("li",[e("code",[a._v("HOST")]),a._v("：当前主机的名称。")]),a._v(" "),e("li",[e("code",[a._v("IFS")]),a._v("：词与词之间的分隔符，默认为空格。")]),a._v(" "),e("li",[e("code",[a._v("LANG")]),a._v("：字符集以及语言编码，比如"),e("code",[a._v("zh_CN.UTF-8")]),a._v("。")]),a._v(" "),e("li",[e("code",[a._v("PATH")]),a._v("：由冒号分开的目录列表，当输入可执行程序名后，会搜索这个目录列表。")]),a._v(" "),e("li",[e("code",[a._v("PS1")]),a._v("：Shell 提示符。")]),a._v(" "),e("li",[e("code",[a._v("PS2")]),a._v("： 输入多行命令时，次要的 Shell 提示符。")]),a._v(" "),e("li",[e("code",[a._v("PWD")]),a._v("：当前工作目录。")]),a._v(" "),e("li",[e("code",[a._v("RANDOM")]),a._v("：返回一个0到32767之间的随机数。")]),a._v(" "),e("li",[e("code",[a._v("SHELL")]),a._v("：Shell 的名字。")]),a._v(" "),e("li",[e("code",[a._v("SHELLOPTS")]),a._v("：启动当前 Shell 的"),e("code",[a._v("set")]),a._v("命令的参数，参见《set 命令》一章。")]),a._v(" "),e("li",[e("code",[a._v("TERM")]),a._v("：终端类型名，即终端仿真器所用的协议。")]),a._v(" "),e("li",[e("code",[a._v("UID")]),a._v("：当前用户的 ID 编号。")]),a._v(" "),e("li",[e("code",[a._v("USER")]),a._v("：当前用户的用户名。")])]),a._v(" "),e("p",[a._v("很多环境变量很少发生变化，而且是只读的，可以视为常量。由于它们的变量名全部都是大写，所以传统上，如果用户要自己定义一个常量，也会使用全部大写的变量名。")]),a._v(" "),e("p",[a._v("注意，Bash 变量名区分大小写，"),e("code",[a._v("HOME")]),a._v("和"),e("code",[a._v("home")]),a._v("是两个不同的变量。")]),a._v(" "),e("p",[a._v("查看单个环境变量的值，可以使用"),e("code",[a._v("printenv")]),a._v("命令或"),e("code",[a._v("echo")]),a._v("命令。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("printenv")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PATH")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 或者")]),a._v("\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$PATH")]),a._v("\n")])])]),e("p",[a._v("注意，"),e("code",[a._v("printenv")]),a._v("命令后面的变量名，不用加前缀"),e("code",[a._v("$")]),a._v("。")]),a._v(" "),e("h3",{attrs:{id:"自定义变量"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#自定义变量"}},[a._v("#")]),a._v(" 自定义变量")]),a._v(" "),e("p",[a._v("自定义变量是用户在当前 Shell 里面自己定义的变量，仅在当前 Shell 可用。一旦退出当前 Shell，该变量就不存在了。")]),a._v(" "),e("p",[e("code",[a._v("set")]),a._v("命令可以显示所有变量（包括环境变量和自定义变量），以及所有的 Bash 函数。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("set")]),a._v("\n")])])]),e("h2",{attrs:{id:"创建变量"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建变量"}},[a._v("#")]),a._v(" 创建变量")]),a._v(" "),e("p",[a._v("用户创建变量的时候，变量名必须遵守下面的规则。")]),a._v(" "),e("ul",[e("li",[a._v("字母、数字和下划线字符组成。")]),a._v(" "),e("li",[a._v("第一个字符必须是一个字母或一个下划线，不能是数字。")]),a._v(" "),e("li",[a._v("不允许出现空格和标点符号。")])]),a._v(" "),e("p",[a._v("变量声明的语法如下。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("variable")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("value\n")])])]),e("p",[a._v("上面命令中，等号左边是变量名，右边是变量。注意，等号两边不能有空格。")]),a._v(" "),e("p",[a._v("如果变量的值包含空格，则必须将值放在引号中。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("myvar")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"hello world"')]),a._v("\n")])])]),e("p",[a._v("Bash 没有数据类型的概念，所有的变量值都是字符串。")]),a._v(" "),e("p",[a._v("下面是一些自定义变量的例子。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("a")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("z                     "),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 变量 a 赋值为字符串 z")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("b")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"a string"')]),a._v("            "),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 变量值包含空格，就必须放在引号里面")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("c")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"a string and '),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$b")]),a._v('"')]),a._v("     "),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 变量值可以引用其他变量的值")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("d")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),e("span",{pre:!0,attrs:{class:"token entity",title:"\\t"}},[a._v("\\t")]),e("span",{pre:!0,attrs:{class:"token entity",title:"\\t"}},[a._v("\\t")]),a._v("a string"),e("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[a._v("\\n")]),a._v('"')]),a._v("      "),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 变量值可以使用转义字符")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("e")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v(" -l foo.txt"),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("      "),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 变量值可以是命令的执行结果")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("f")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$((")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("5")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("7")]),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("))")])]),a._v("            "),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 变量值可以是数学运算的结果")]),a._v("\n")])])]),e("p",[a._v("变量可以重复赋值，后面的赋值会覆盖前面的赋值。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("foo")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n$ "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("foo")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$foo")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("\n")])])]),e("p",[a._v("上面例子中，变量"),e("code",[a._v("foo")]),a._v("的第二次赋值会覆盖第一次赋值。")]),a._v(" "),e("p",[a._v("如果同一行定义多个变量，必须使用分号（"),e("code",[a._v(";")]),a._v("）分隔。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("foo")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("bar")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("\n")])])]),e("p",[a._v("上面例子中，同一行定义了"),e("code",[a._v("foo")]),a._v("和"),e("code",[a._v("bar")]),a._v("两个变量。")]),a._v(" "),e("h2",{attrs:{id:"读取变量"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#读取变量"}},[a._v("#")]),a._v(" 读取变量")]),a._v(" "),e("p",[a._v("读取变量的时候，直接在变量名前加上"),e("code",[a._v("$")]),a._v("就可以了。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("foo")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("bar\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$foo")]),a._v("\nbar\n")])])]),e("p",[a._v("每当 Shell 看到以"),e("code",[a._v("$")]),a._v("开头的单词时，就会尝试读取这个变量名对应的值。")]),a._v(" "),e("p",[a._v("如果变量不存在，Bash 不会报错，而会输出空字符。")]),a._v(" "),e("p",[a._v("由于"),e("code",[a._v("$")]),a._v("在 Bash 中有特殊含义，把它当作美元符号使用时，一定要非常小心，")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" The total is "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$100")]),a._v(".00\nThe total is 00.00\n")])])]),e("p",[a._v("上面命令的原意是输入"),e("code",[a._v("$100")]),a._v("，但是 Bash 将"),e("code",[a._v("$1")]),a._v("解释成了变量，该变量为空，因此输入就变成了"),e("code",[a._v("00.00")]),a._v("。所以，如果要使用"),e("code",[a._v("$")]),a._v("的原义，需要在"),e("code",[a._v("$")]),a._v("前面放上反斜杠，进行转义。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" The total is "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$100")]),a._v(".00\nThe total is "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$100")]),a._v(".00\n")])])]),e("p",[a._v("读取变量的时候，变量名也可以使用花括号"),e("code",[a._v("{}")]),a._v("包围，比如"),e("code",[a._v("$a")]),a._v("也可以写成"),e("code",[a._v("${a}")]),a._v("。这种写法可以用于变量名与其他字符连用的情况。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("a")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("foo\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$a_file")]),a._v("\n\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${a}")]),a._v("_file\nfoo_file\n")])])]),e("p",[a._v("上面代码中，变量名"),e("code",[a._v("a_file")]),a._v("不会有任何输出，因为 Bash 将其整个解释为变量，而这个变量是不存在的。只有用花括号区分"),e("code",[a._v("$a")]),a._v("，Bash 才能正确解读。")]),a._v(" "),e("p",[a._v("事实上，读取变量的语法"),e("code",[a._v("$foo")]),a._v("，可以看作是"),e("code",[a._v("${foo}")]),a._v("的简写形式。")]),a._v(" "),e("p",[a._v("如果变量的值本身也是变量，可以使用"),e("code",[a._v("${!varname}")]),a._v("的语法，读取最终的值。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("myvar")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("USER")]),a._v("\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v("myvar}")]),a._v("\nruanyf\n")])])]),e("p",[a._v("上面的例子中，变量"),e("code",[a._v("myvar")]),a._v("的值是"),e("code",[a._v("USER")]),a._v("，"),e("code",[a._v("${!myvar}")]),a._v("的写法将其展开成最终的值。")]),a._v(" "),e("p",[a._v("如果变量值包含连续空格（或制表符和换行符），最好放在双引号里面读取。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("a")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"1 2  3"')]),a._v("\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$a")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v("\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$a")]),a._v('"')]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("  "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v("\n")])])]),e("p",[a._v("上面示例中，变量"),e("code",[a._v("a")]),a._v("的值包含两个连续空格。如果直接读取，Shell 会将连续空格合并成一个。只有放在双引号里面读取，才能保持原来的格式。")]),a._v(" "),e("h2",{attrs:{id:"删除变量"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#删除变量"}},[a._v("#")]),a._v(" 删除变量")]),a._v(" "),e("p",[e("code",[a._v("unset")]),a._v("命令用来删除一个变量。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("unset")]),a._v(" NAME\n")])])]),e("p",[a._v("这个命令不是很有用。因为不存在的 Bash 变量一律等于空字符串，所以即使"),e("code",[a._v("unset")]),a._v("命令删除了变量，还是可以读取这个变量，值为空字符串。")]),a._v(" "),e("p",[a._v("所以，删除一个变量，也可以将这个变量设成空字符串。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("foo")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("''")]),a._v("\n$ "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("foo")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\n")])])]),e("p",[a._v("上面两种写法，都是删除了变量"),e("code",[a._v("foo")]),a._v("。由于不存在的值默认为空字符串，所以后一种写法可以在等号右边不写任何值。")]),a._v(" "),e("h2",{attrs:{id:"输出变量-export-命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#输出变量-export-命令"}},[a._v("#")]),a._v(" 输出变量，export 命令")]),a._v(" "),e("p",[a._v("用户创建的变量仅可用于当前 Shell，子 Shell 默认读取不到父 Shell 定义的变量。为了把变量传递给子 Shell，需要使用"),e("code",[a._v("export")]),a._v("命令。这样输出的变量，对于子 Shell 来说就是环境变量。")]),a._v(" "),e("p",[e("code",[a._v("export")]),a._v("命令用来向子 Shell 输出变量。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("NAME")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("foo\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" NAME\n")])])]),e("p",[a._v("上面命令输出了变量"),e("code",[a._v("NAME")]),a._v("。变量的赋值和输出也可以在一个步骤中完成。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("NAME")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("value\n")])])]),e("p",[a._v("上面命令执行后，当前 Shell 及随后新建的子 Shell，都可以读取变量"),e("code",[a._v("$NAME")]),a._v("。")]),a._v(" "),e("p",[a._v("子 Shell 如果修改继承的变量，不会影响父 Shell。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 输出变量 $foo")]),a._v("\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("foo")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("bar\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 新建子 Shell")]),a._v("\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("bash")]),a._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 读取 $foo")]),a._v("\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$foo")]),a._v("\nbar\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 修改继承的变量")]),a._v("\n$ "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("foo")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("baz\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 退出子 Shell")]),a._v("\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exit")]),a._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 读取 $foo")]),a._v("\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$foo")]),a._v("\nbar\n")])])]),e("p",[a._v("上面例子中，子 Shell 修改了继承的变量"),e("code",[a._v("$foo")]),a._v("，对父 Shell 没有影响。")]),a._v(" "),e("h2",{attrs:{id:"特殊变量"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#特殊变量"}},[a._v("#")]),a._v(" 特殊变量")]),a._v(" "),e("p",[a._v("Bash 提供一些特殊变量。这些变量的值由 Shell 提供，用户不能进行赋值。")]),a._v(" "),e("p",[a._v("（1）"),e("code",[a._v("$?")])]),a._v(" "),e("p",[e("code",[a._v("$?")]),a._v("为上一个命令的退出码，用来判断上一个命令是否执行成功。返回值是"),e("code",[a._v("0")]),a._v("，表示上一个命令执行成功；如果是非零，上一个命令执行失败。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v(" doesnotexist\nls: doesnotexist: No such "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("file")]),a._v(" or directory\n\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$?")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n")])])]),e("p",[a._v("上面例子中，"),e("code",[a._v("ls")]),a._v("命令查看一个不存在的文件，导致报错。"),e("code",[a._v("$?")]),a._v("为1，表示上一个命令执行失败。")]),a._v(" "),e("p",[a._v("（2）"),e("code",[a._v("$$")])]),a._v(" "),e("p",[e("code",[a._v("$$")]),a._v("为当前 Shell 的进程 ID。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$$")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("10662")]),a._v("\n")])])]),e("p",[a._v("这个特殊变量可以用来命名临时文件。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("LOGFILE")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/tmp/output_log."),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$$")]),a._v("\n")])])]),e("p",[a._v("（3）"),e("code",[a._v("$_")])]),a._v(" "),e("p",[e("code",[a._v("$_")]),a._v("为上一个命令的最后一个参数。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" dictionary /usr/share/dict/words\ndictionary\n\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$_")]),a._v("\n/usr/share/dict/words\n")])])]),e("p",[a._v("（4）"),e("code",[a._v("$!")])]),a._v(" "),e("p",[e("code",[a._v("$!")]),a._v("为最近一个后台执行的异步命令的进程 ID。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ firefox "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("11064")]),a._v("\n\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$!")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("11064")]),a._v("\n")])])]),e("p",[a._v("上面例子中，"),e("code",[a._v("firefox")]),a._v("是后台运行的命令，"),e("code",[a._v("$!")]),a._v("返回该命令的进程 ID。")]),a._v(" "),e("p",[a._v("（5）"),e("code",[a._v("$0")])]),a._v(" "),e("p",[e("code",[a._v("$0")]),a._v("为当前 Shell 的名称（在命令行直接执行时）或者脚本名（在脚本中执行时）。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$0")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("bash")]),a._v("\n")])])]),e("p",[a._v("上面例子中，"),e("code",[a._v("$0")]),a._v("返回当前运行的是 Bash。")]),a._v(" "),e("p",[a._v("（6）"),e("code",[a._v("$-")])]),a._v(" "),e("p",[e("code",[a._v("$-")]),a._v("为当前 Shell 的启动参数。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" $-\nhimBHs\n")])])]),e("p",[a._v("（7）"),e("code",[a._v("$@")]),a._v("和"),e("code",[a._v("$#")])]),a._v(" "),e("p",[e("code",[a._v("$#")]),a._v("表示脚本的参数数量，"),e("code",[a._v("$@")]),a._v("表示脚本的参数值，参见脚本一章。")]),a._v(" "),e("h2",{attrs:{id:"变量的默认值"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#变量的默认值"}},[a._v("#")]),a._v(" 变量的默认值")]),a._v(" "),e("p",[a._v("Bash 提供四个特殊语法，跟变量的默认值有关，目的是保证变量不为空。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${varname"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":-")]),a._v("word}")]),a._v("\n")])])]),e("p",[a._v("上面语法的含义是，如果变量"),e("code",[a._v("varname")]),a._v("存在且不为空，则返回它的值，否则返回"),e("code",[a._v("word")]),a._v("。它的目的是返回一个默认值，比如"),e("code",[a._v("${count:-0}")]),a._v("表示变量"),e("code",[a._v("count")]),a._v("不存在时返回"),e("code",[a._v("0")]),a._v("。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${varname"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":=")]),a._v("word}")]),a._v("\n")])])]),e("p",[a._v("上面语法的含义是，如果变量"),e("code",[a._v("varname")]),a._v("存在且不为空，则返回它的值，否则将它设为"),e("code",[a._v("word")]),a._v("，并且返回"),e("code",[a._v("word")]),a._v("。它的目的是设置变量的默认值，比如"),e("code",[a._v("${count:=0}")]),a._v("表示变量"),e("code",[a._v("count")]),a._v("不存在时返回"),e("code",[a._v("0")]),a._v("，且将"),e("code",[a._v("count")]),a._v("设为"),e("code",[a._v("0")]),a._v("。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${varname"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":+")]),a._v("word}")]),a._v("\n")])])]),e("p",[a._v("上面语法的含义是，如果变量名存在且不为空，则返回"),e("code",[a._v("word")]),a._v("，否则返回空值。它的目的是测试变量是否存在，比如"),e("code",[a._v("${count:+1}")]),a._v("表示变量"),e("code",[a._v("count")]),a._v("存在时返回"),e("code",[a._v("1")]),a._v("（表示"),e("code",[a._v("true")]),a._v("），否则返回空值。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${varname"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":?")]),a._v("message}")]),a._v("\n")])])]),e("p",[a._v("上面语法的含义是，如果变量"),e("code",[a._v("varname")]),a._v("存在且不为空，则返回它的值，否则打印出"),e("code",[a._v("varname: message")]),a._v("，并中断脚本的执行。如果省略了"),e("code",[a._v("message")]),a._v("，则输出默认的信息“parameter null or not set.”。它的目的是防止变量未定义，比如"),e("code",[a._v('${count:?"undefined!"}')]),a._v("表示变量"),e("code",[a._v("count")]),a._v("未定义时就中断执行，抛出错误，返回给定的报错信息"),e("code",[a._v("undefined!")]),a._v("。")]),a._v(" "),e("p",[a._v("上面四种语法如果用在脚本中，变量名的部分可以用数字"),e("code",[a._v("1")]),a._v("到"),e("code",[a._v("9")]),a._v("，表示脚本的参数。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("filename")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${1"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":?")]),a._v('"filename missing."}')]),a._v("\n")])])]),e("p",[a._v("上面代码出现在脚本中，"),e("code",[a._v("1")]),a._v("表示脚本的第一个参数。如果该参数不存在，就退出脚本并报错。")]),a._v(" "),e("h2",{attrs:{id:"declare-命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#declare-命令"}},[a._v("#")]),a._v(" declare 命令")]),a._v(" "),e("p",[e("code",[a._v("declare")]),a._v("命令可以声明一些特殊类型的变量，为变量设置一些限制，比如声明只读类型的变量和整数类型的变量。")]),a._v(" "),e("p",[a._v("它的语法形式如下。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v(" OPTION "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("VARIABLE")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("value\n")])])]),e("p",[e("code",[a._v("declare")]),a._v("命令的主要参数（OPTION）如下。")]),a._v(" "),e("ul",[e("li",[e("code",[a._v("-a")]),a._v("：声明数组变量。")]),a._v(" "),e("li",[e("code",[a._v("-f")]),a._v("：输出所有函数定义。")]),a._v(" "),e("li",[e("code",[a._v("-F")]),a._v("：输出所有函数名。")]),a._v(" "),e("li",[e("code",[a._v("-i")]),a._v("：声明整数变量。")]),a._v(" "),e("li",[e("code",[a._v("-l")]),a._v("：声明变量为小写字母。")]),a._v(" "),e("li",[e("code",[a._v("-p")]),a._v("：查看变量信息。")]),a._v(" "),e("li",[e("code",[a._v("-r")]),a._v("：声明只读变量。")]),a._v(" "),e("li",[e("code",[a._v("-u")]),a._v("：声明变量为大写字母。")]),a._v(" "),e("li",[e("code",[a._v("-x")]),a._v("：该变量输出为环境变量。")])]),a._v(" "),e("p",[e("code",[a._v("declare")]),a._v("命令如果用在函数中，声明的变量只在函数内部有效，等同于"),e("code",[a._v("local")]),a._v("命令。")]),a._v(" "),e("p",[a._v("不带任何参数时，"),e("code",[a._v("declare")]),a._v("命令输出当前环境的所有变量，包括函数在内，等同于不带有任何参数的"),e("code",[a._v("set")]),a._v("命令。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v("\n")])])]),e("p",[e("strong",[a._v("（1）"),e("code",[a._v("-i")]),a._v("参数")])]),a._v(" "),e("p",[e("code",[a._v("-i")]),a._v("参数声明整数变量以后，可以直接进行数学运算。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v(" -i "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("val1")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("12")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("val2")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("5")]),a._v("\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v(" -i result\n$ "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("result")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("val1*val2\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$result")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("60")]),a._v("\n")])])]),e("p",[a._v("上面例子中，如果变量"),e("code",[a._v("result")]),a._v("不声明为整数，"),e("code",[a._v("val1*val2")]),a._v("会被当作字面量，不会进行整数运算。另外，"),e("code",[a._v("val1")]),a._v("和"),e("code",[a._v("val2")]),a._v("其实不需要声明为整数，因为只要"),e("code",[a._v("result")]),a._v("声明为整数，它的赋值就会自动解释为整数运算。")]),a._v(" "),e("p",[a._v("注意，一个变量声明为整数以后，依然可以被改写为字符串。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v(" -i "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("var")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("12")]),a._v("\n$ "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("var")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("foo\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$var")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\n")])])]),e("p",[a._v("上面例子中，变量"),e("code",[a._v("var")]),a._v("声明为整数，覆盖以后，Bash 不会报错，但会赋以不确定的值，上面的例子中可能输出0，也可能输出的是3。")]),a._v(" "),e("p",[e("strong",[a._v("（2）"),e("code",[a._v("-x")]),a._v("参数")])]),a._v(" "),e("p",[e("code",[a._v("-x")]),a._v("参数等同于"),e("code",[a._v("export")]),a._v("命令，可以输出一个变量为子 Shell 的环境变量。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v(" -x foo\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 等同于")]),a._v("\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" foo\n")])])]),e("p",[e("strong",[a._v("（3）"),e("code",[a._v("-r")]),a._v("参数")])]),a._v(" "),e("p",[e("code",[a._v("-r")]),a._v("参数可以声明只读变量，无法改变变量值，也不能"),e("code",[a._v("unset")]),a._v("变量。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v(" -r "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("bar")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n\n$ "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("bar")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("\nbash: bar：只读变量\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$?")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("unset")]),a._v(" bar\nbash: bar：只读变量\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$?")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n")])])]),e("p",[a._v("上面例子中，后两个赋值语句都会报错，命令执行失败。")]),a._v(" "),e("p",[e("strong",[a._v("（4）"),e("code",[a._v("-u")]),a._v("参数")])]),a._v(" "),e("p",[e("code",[a._v("-u")]),a._v("参数声明变量为大写字母，可以自动把变量值转成大写字母。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v(" -u foo\n$ "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("foo")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("upper\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$foo")]),a._v("\nUPPER\n")])])]),e("p",[e("strong",[a._v("（5）"),e("code",[a._v("-l")]),a._v("参数")])]),a._v(" "),e("p",[e("code",[a._v("-l")]),a._v("参数声明变量为小写字母，可以自动把变量值转成小写字母。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v(" -l bar\n$ "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("bar")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("LOWER\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$bar")]),a._v("\nlower\n")])])]),e("p",[e("strong",[a._v("（6）"),e("code",[a._v("-p")]),a._v("参数")])]),a._v(" "),e("p",[e("code",[a._v("-p")]),a._v("参数输出变量信息。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("foo")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("hello\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v(" -p foo\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v(" -- "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("foo")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"hello"')]),a._v("\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v(" -p bar\nbar：未找到\n")])])]),e("p",[a._v("上面例子中，"),e("code",[a._v("declare -p")]),a._v("可以输出已定义变量的值，对于未定义的变量，会提示找不到。")]),a._v(" "),e("p",[a._v("如果不提供变量名，"),e("code",[a._v("declare -p")]),a._v("输出所有变量的信息。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v(" -p\n")])])]),e("p",[e("strong",[a._v("（7）"),e("code",[a._v("-f")]),a._v("参数")])]),a._v(" "),e("p",[e("code",[a._v("-f")]),a._v("参数输出当前环境的所有函数，包括它的定义。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v(" -f\n")])])]),e("p",[e("strong",[a._v("（8）"),e("code",[a._v("-F")]),a._v("参数")])]),a._v(" "),e("p",[e("code",[a._v("-F")]),a._v("参数输出当前环境的所有函数名，不包含函数定义。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v(" -F\n")])])]),e("h2",{attrs:{id:"readonly-命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#readonly-命令"}},[a._v("#")]),a._v(" readonly 命令")]),a._v(" "),e("p",[e("code",[a._v("readonly")]),a._v("命令等同于"),e("code",[a._v("declare -r")]),a._v("，用来声明只读变量，不能改变变量值，也不能"),e("code",[a._v("unset")]),a._v("变量。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("readonly")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("foo")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n$ "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("foo")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("\nbash: foo：只读变量\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$?")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n")])])]),e("p",[a._v("上面例子中，更改只读变量"),e("code",[a._v("foo")]),a._v("会报错，命令执行失败。")]),a._v(" "),e("p",[e("code",[a._v("readonly")]),a._v("命令有三个参数。")]),a._v(" "),e("ul",[e("li",[e("code",[a._v("-f")]),a._v("：声明的变量为函数名。")]),a._v(" "),e("li",[e("code",[a._v("-p")]),a._v("：打印出所有的只读变量。")]),a._v(" "),e("li",[e("code",[a._v("-a")]),a._v("：声明的变量为数组。")])]),a._v(" "),e("h2",{attrs:{id:"let-命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#let-命令"}},[a._v("#")]),a._v(" let 命令")]),a._v(" "),e("p",[e("code",[a._v("let")]),a._v("命令声明变量时，可以直接执行算术表达式。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("let")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("foo")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("+2\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$foo")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v("\n")])])]),e("p",[a._v("上面例子中，"),e("code",[a._v("let")]),a._v("命令可以直接计算"),e("code",[a._v("1 + 2")]),a._v("。")]),a._v(" "),e("p",[e("code",[a._v("let")]),a._v("命令的参数表达式如果包含空格，就需要使用引号。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("let")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"foo = 1 + 2"')]),a._v("\n")])])]),e("p",[e("code",[a._v("let")]),a._v("可以同时对多个变量赋值，赋值表达式之间使用空格分隔。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("let")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"v1 = 1"')]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"v2 = v1++"')]),a._v("\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$v1")]),a._v(","),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$v2")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("2,1")]),a._v("\n")])])]),e("p",[a._v("上面例子中，"),e("code",[a._v("let")]),a._v("声明了两个变量"),e("code",[a._v("v1")]),a._v("和"),e("code",[a._v("v2")]),a._v("，其中"),e("code",[a._v("v2")]),a._v("等于"),e("code",[a._v("v1++")]),a._v("，表示先返回"),e("code",[a._v("v1")]),a._v("的值，然后"),e("code",[a._v("v1")]),a._v("自增。")]),a._v(" "),e("p",[a._v("这种语法支持的运算符，参考《Bash 的算术运算》一章。")])])}),[],!1,null,null,null);s.default=v.exports}}]);