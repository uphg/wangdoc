<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>条件判断 | WangDoc</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="stylesheet" href="/wangdoc/font/index.css">
    <meta name="description" content="Carried from Ruan Yifeng">
    
    <link rel="preload" href="/wangdoc/assets/css/0.styles.b8e2a6d5.css" as="style"><link rel="preload" href="/wangdoc/assets/js/app.8723d088.js" as="script"><link rel="preload" href="/wangdoc/assets/js/2.9a1a264e.js" as="script"><link rel="preload" href="/wangdoc/assets/js/68.f463daf1.js" as="script"><link rel="preload" href="/wangdoc/assets/js/3.59361ec6.js" as="script"><link rel="prefetch" href="/wangdoc/assets/js/10.fffc7a41.js"><link rel="prefetch" href="/wangdoc/assets/js/100.3e59f891.js"><link rel="prefetch" href="/wangdoc/assets/js/101.ef65efb9.js"><link rel="prefetch" href="/wangdoc/assets/js/102.75a61923.js"><link rel="prefetch" href="/wangdoc/assets/js/103.950126da.js"><link rel="prefetch" href="/wangdoc/assets/js/104.0a3f6380.js"><link rel="prefetch" href="/wangdoc/assets/js/105.a8a2751c.js"><link rel="prefetch" href="/wangdoc/assets/js/106.0909bfd6.js"><link rel="prefetch" href="/wangdoc/assets/js/107.61dd327f.js"><link rel="prefetch" href="/wangdoc/assets/js/108.208d689b.js"><link rel="prefetch" href="/wangdoc/assets/js/109.3429b861.js"><link rel="prefetch" href="/wangdoc/assets/js/11.8e77b7fa.js"><link rel="prefetch" href="/wangdoc/assets/js/110.b17a98c3.js"><link rel="prefetch" href="/wangdoc/assets/js/111.67089df7.js"><link rel="prefetch" href="/wangdoc/assets/js/112.a61e4aac.js"><link rel="prefetch" href="/wangdoc/assets/js/113.8d129cc4.js"><link rel="prefetch" href="/wangdoc/assets/js/114.91202325.js"><link rel="prefetch" href="/wangdoc/assets/js/115.9232db7a.js"><link rel="prefetch" href="/wangdoc/assets/js/116.3f57f7fa.js"><link rel="prefetch" href="/wangdoc/assets/js/117.39fbb4a2.js"><link rel="prefetch" href="/wangdoc/assets/js/118.98fbb079.js"><link rel="prefetch" href="/wangdoc/assets/js/119.b802df94.js"><link rel="prefetch" href="/wangdoc/assets/js/12.5dfcc468.js"><link rel="prefetch" href="/wangdoc/assets/js/120.f2f3e969.js"><link rel="prefetch" href="/wangdoc/assets/js/121.ddc41600.js"><link rel="prefetch" href="/wangdoc/assets/js/122.1f9e6996.js"><link rel="prefetch" href="/wangdoc/assets/js/123.3dab5cb7.js"><link rel="prefetch" href="/wangdoc/assets/js/124.b5634c42.js"><link rel="prefetch" href="/wangdoc/assets/js/125.ba352811.js"><link rel="prefetch" href="/wangdoc/assets/js/126.98b393c9.js"><link rel="prefetch" href="/wangdoc/assets/js/127.b496b115.js"><link rel="prefetch" href="/wangdoc/assets/js/128.efd428c1.js"><link rel="prefetch" href="/wangdoc/assets/js/129.611df66b.js"><link rel="prefetch" href="/wangdoc/assets/js/13.a62f0816.js"><link rel="prefetch" href="/wangdoc/assets/js/130.4b7a2d82.js"><link rel="prefetch" href="/wangdoc/assets/js/131.bdc89fb1.js"><link rel="prefetch" href="/wangdoc/assets/js/132.81e9f548.js"><link rel="prefetch" href="/wangdoc/assets/js/133.5eb3b1b7.js"><link rel="prefetch" href="/wangdoc/assets/js/134.38475e6b.js"><link rel="prefetch" href="/wangdoc/assets/js/135.97431481.js"><link rel="prefetch" href="/wangdoc/assets/js/136.30b1e941.js"><link rel="prefetch" href="/wangdoc/assets/js/137.73813383.js"><link rel="prefetch" href="/wangdoc/assets/js/138.b01b5323.js"><link rel="prefetch" href="/wangdoc/assets/js/139.c1684e59.js"><link rel="prefetch" href="/wangdoc/assets/js/14.84f939d6.js"><link rel="prefetch" href="/wangdoc/assets/js/140.f4558659.js"><link rel="prefetch" href="/wangdoc/assets/js/141.1bc13a9c.js"><link rel="prefetch" href="/wangdoc/assets/js/142.055417da.js"><link rel="prefetch" href="/wangdoc/assets/js/143.e601ea78.js"><link rel="prefetch" href="/wangdoc/assets/js/144.1e73528e.js"><link rel="prefetch" href="/wangdoc/assets/js/145.6bf0a2fe.js"><link rel="prefetch" href="/wangdoc/assets/js/146.a1ae1ce8.js"><link rel="prefetch" href="/wangdoc/assets/js/147.b8be9cae.js"><link rel="prefetch" href="/wangdoc/assets/js/148.8cbf7229.js"><link rel="prefetch" href="/wangdoc/assets/js/149.01b6ab4a.js"><link rel="prefetch" href="/wangdoc/assets/js/15.82f0e11e.js"><link rel="prefetch" href="/wangdoc/assets/js/150.4c804003.js"><link rel="prefetch" href="/wangdoc/assets/js/151.d7e5eb85.js"><link rel="prefetch" href="/wangdoc/assets/js/152.14229211.js"><link rel="prefetch" href="/wangdoc/assets/js/153.0d37926e.js"><link rel="prefetch" href="/wangdoc/assets/js/154.8bcfe02c.js"><link rel="prefetch" href="/wangdoc/assets/js/155.527ee7a3.js"><link rel="prefetch" href="/wangdoc/assets/js/156.38bc424c.js"><link rel="prefetch" href="/wangdoc/assets/js/157.3e0373c8.js"><link rel="prefetch" href="/wangdoc/assets/js/158.fc8b752f.js"><link rel="prefetch" href="/wangdoc/assets/js/159.c93507b3.js"><link rel="prefetch" href="/wangdoc/assets/js/16.5f5758fa.js"><link rel="prefetch" href="/wangdoc/assets/js/160.c4b534f5.js"><link rel="prefetch" href="/wangdoc/assets/js/161.06c90281.js"><link rel="prefetch" href="/wangdoc/assets/js/162.bd0061bc.js"><link rel="prefetch" href="/wangdoc/assets/js/163.7dc573cc.js"><link rel="prefetch" href="/wangdoc/assets/js/164.46c37e7e.js"><link rel="prefetch" href="/wangdoc/assets/js/165.8c3320bc.js"><link rel="prefetch" href="/wangdoc/assets/js/166.52bd3222.js"><link rel="prefetch" href="/wangdoc/assets/js/167.dbb3c808.js"><link rel="prefetch" href="/wangdoc/assets/js/168.e63c4c28.js"><link rel="prefetch" href="/wangdoc/assets/js/169.2a437e05.js"><link rel="prefetch" href="/wangdoc/assets/js/17.053fde3c.js"><link rel="prefetch" href="/wangdoc/assets/js/170.b7f98abe.js"><link rel="prefetch" href="/wangdoc/assets/js/171.b3b224c7.js"><link rel="prefetch" href="/wangdoc/assets/js/172.080f2b03.js"><link rel="prefetch" href="/wangdoc/assets/js/173.87af14bd.js"><link rel="prefetch" href="/wangdoc/assets/js/174.b91695a3.js"><link rel="prefetch" href="/wangdoc/assets/js/175.9db61895.js"><link rel="prefetch" href="/wangdoc/assets/js/176.026ab96b.js"><link rel="prefetch" href="/wangdoc/assets/js/177.7990a06a.js"><link rel="prefetch" href="/wangdoc/assets/js/178.374813d2.js"><link rel="prefetch" href="/wangdoc/assets/js/179.f35e9bb6.js"><link rel="prefetch" href="/wangdoc/assets/js/18.4f711126.js"><link rel="prefetch" href="/wangdoc/assets/js/180.c16c6d3b.js"><link rel="prefetch" href="/wangdoc/assets/js/181.3a5462f6.js"><link rel="prefetch" href="/wangdoc/assets/js/182.26ff6d1c.js"><link rel="prefetch" href="/wangdoc/assets/js/183.8c47c990.js"><link rel="prefetch" href="/wangdoc/assets/js/184.71fbdaa4.js"><link rel="prefetch" href="/wangdoc/assets/js/185.e0399587.js"><link rel="prefetch" href="/wangdoc/assets/js/186.b4744693.js"><link rel="prefetch" href="/wangdoc/assets/js/187.8c1edd7c.js"><link rel="prefetch" href="/wangdoc/assets/js/188.3de1c37e.js"><link rel="prefetch" href="/wangdoc/assets/js/189.d946e11d.js"><link rel="prefetch" href="/wangdoc/assets/js/19.f34b619c.js"><link rel="prefetch" href="/wangdoc/assets/js/190.612f181f.js"><link rel="prefetch" href="/wangdoc/assets/js/191.a81ba58e.js"><link rel="prefetch" href="/wangdoc/assets/js/192.42db791a.js"><link rel="prefetch" href="/wangdoc/assets/js/193.4ec3f969.js"><link rel="prefetch" href="/wangdoc/assets/js/194.fd924de9.js"><link rel="prefetch" href="/wangdoc/assets/js/195.ee0924e6.js"><link rel="prefetch" href="/wangdoc/assets/js/196.5dbb1d15.js"><link rel="prefetch" href="/wangdoc/assets/js/197.701e76ac.js"><link rel="prefetch" href="/wangdoc/assets/js/198.99352439.js"><link rel="prefetch" href="/wangdoc/assets/js/199.18de1981.js"><link rel="prefetch" href="/wangdoc/assets/js/20.63fcdeab.js"><link rel="prefetch" href="/wangdoc/assets/js/200.473e83b9.js"><link rel="prefetch" href="/wangdoc/assets/js/201.0876610e.js"><link rel="prefetch" href="/wangdoc/assets/js/202.850bec6f.js"><link rel="prefetch" href="/wangdoc/assets/js/203.5c6a0391.js"><link rel="prefetch" href="/wangdoc/assets/js/204.f6e98d0c.js"><link rel="prefetch" href="/wangdoc/assets/js/205.85a84dce.js"><link rel="prefetch" href="/wangdoc/assets/js/206.73f9ea55.js"><link rel="prefetch" href="/wangdoc/assets/js/207.877457e9.js"><link rel="prefetch" href="/wangdoc/assets/js/208.4ab305de.js"><link rel="prefetch" href="/wangdoc/assets/js/209.f631d42b.js"><link rel="prefetch" href="/wangdoc/assets/js/21.53646bd4.js"><link rel="prefetch" href="/wangdoc/assets/js/210.54866ad8.js"><link rel="prefetch" href="/wangdoc/assets/js/211.8a2461ad.js"><link rel="prefetch" href="/wangdoc/assets/js/212.1a1631ff.js"><link rel="prefetch" href="/wangdoc/assets/js/213.65a08201.js"><link rel="prefetch" href="/wangdoc/assets/js/214.e091799f.js"><link rel="prefetch" href="/wangdoc/assets/js/215.3f088f25.js"><link rel="prefetch" href="/wangdoc/assets/js/216.525ce2e2.js"><link rel="prefetch" href="/wangdoc/assets/js/217.66d821a3.js"><link rel="prefetch" href="/wangdoc/assets/js/218.1a79eb73.js"><link rel="prefetch" href="/wangdoc/assets/js/219.6268047b.js"><link rel="prefetch" href="/wangdoc/assets/js/22.36428159.js"><link rel="prefetch" href="/wangdoc/assets/js/220.9c6338ad.js"><link rel="prefetch" href="/wangdoc/assets/js/221.02146d93.js"><link rel="prefetch" href="/wangdoc/assets/js/222.eea3bd30.js"><link rel="prefetch" href="/wangdoc/assets/js/223.552d4a26.js"><link rel="prefetch" href="/wangdoc/assets/js/224.175eebf2.js"><link rel="prefetch" href="/wangdoc/assets/js/225.408dcf42.js"><link rel="prefetch" href="/wangdoc/assets/js/226.5ba00006.js"><link rel="prefetch" href="/wangdoc/assets/js/227.b7671369.js"><link rel="prefetch" href="/wangdoc/assets/js/228.3522be14.js"><link rel="prefetch" href="/wangdoc/assets/js/229.812add83.js"><link rel="prefetch" href="/wangdoc/assets/js/23.e250d2fd.js"><link rel="prefetch" href="/wangdoc/assets/js/230.9e4314dc.js"><link rel="prefetch" href="/wangdoc/assets/js/231.3a4fa902.js"><link rel="prefetch" href="/wangdoc/assets/js/232.6939ad2d.js"><link rel="prefetch" href="/wangdoc/assets/js/233.ea0f4da8.js"><link rel="prefetch" href="/wangdoc/assets/js/234.84583de3.js"><link rel="prefetch" href="/wangdoc/assets/js/235.122a476b.js"><link rel="prefetch" href="/wangdoc/assets/js/236.3f4dd591.js"><link rel="prefetch" href="/wangdoc/assets/js/237.9e8d960a.js"><link rel="prefetch" href="/wangdoc/assets/js/238.44e1491a.js"><link rel="prefetch" href="/wangdoc/assets/js/239.34e411dc.js"><link rel="prefetch" href="/wangdoc/assets/js/24.f736c744.js"><link rel="prefetch" href="/wangdoc/assets/js/240.02a03faa.js"><link rel="prefetch" href="/wangdoc/assets/js/241.892ea6ad.js"><link rel="prefetch" href="/wangdoc/assets/js/242.2727cbba.js"><link rel="prefetch" href="/wangdoc/assets/js/243.3a66a03c.js"><link rel="prefetch" href="/wangdoc/assets/js/244.87fe4877.js"><link rel="prefetch" href="/wangdoc/assets/js/245.7c8a2445.js"><link rel="prefetch" href="/wangdoc/assets/js/246.560997d4.js"><link rel="prefetch" href="/wangdoc/assets/js/247.59d98ae4.js"><link rel="prefetch" href="/wangdoc/assets/js/248.d1ccbc48.js"><link rel="prefetch" href="/wangdoc/assets/js/249.03d46d71.js"><link rel="prefetch" href="/wangdoc/assets/js/25.f48ff59a.js"><link rel="prefetch" href="/wangdoc/assets/js/250.6efa8244.js"><link rel="prefetch" href="/wangdoc/assets/js/251.0026c87f.js"><link rel="prefetch" href="/wangdoc/assets/js/26.40d3655b.js"><link rel="prefetch" href="/wangdoc/assets/js/27.38a65ddc.js"><link rel="prefetch" href="/wangdoc/assets/js/28.8b75da0a.js"><link rel="prefetch" href="/wangdoc/assets/js/29.f13fc723.js"><link rel="prefetch" href="/wangdoc/assets/js/30.315594cc.js"><link rel="prefetch" href="/wangdoc/assets/js/31.a3449021.js"><link rel="prefetch" href="/wangdoc/assets/js/32.948ef6d8.js"><link rel="prefetch" href="/wangdoc/assets/js/33.153aea70.js"><link rel="prefetch" href="/wangdoc/assets/js/34.f2788372.js"><link rel="prefetch" href="/wangdoc/assets/js/35.22e4ae1a.js"><link rel="prefetch" href="/wangdoc/assets/js/36.f48064c8.js"><link rel="prefetch" href="/wangdoc/assets/js/37.3773d5a0.js"><link rel="prefetch" href="/wangdoc/assets/js/38.93705a9c.js"><link rel="prefetch" href="/wangdoc/assets/js/39.2afce206.js"><link rel="prefetch" href="/wangdoc/assets/js/4.4b75fed9.js"><link rel="prefetch" href="/wangdoc/assets/js/40.51df798f.js"><link rel="prefetch" href="/wangdoc/assets/js/41.95d176c1.js"><link rel="prefetch" href="/wangdoc/assets/js/42.5272f207.js"><link rel="prefetch" href="/wangdoc/assets/js/43.34f2e9f3.js"><link rel="prefetch" href="/wangdoc/assets/js/44.1f785bbb.js"><link rel="prefetch" href="/wangdoc/assets/js/45.0102682b.js"><link rel="prefetch" href="/wangdoc/assets/js/46.f52a47d9.js"><link rel="prefetch" href="/wangdoc/assets/js/47.6a133660.js"><link rel="prefetch" href="/wangdoc/assets/js/48.04d685e6.js"><link rel="prefetch" href="/wangdoc/assets/js/49.2733ea4d.js"><link rel="prefetch" href="/wangdoc/assets/js/5.9bd83369.js"><link rel="prefetch" href="/wangdoc/assets/js/50.51c74ba3.js"><link rel="prefetch" href="/wangdoc/assets/js/51.a92da126.js"><link rel="prefetch" href="/wangdoc/assets/js/52.1cf0402d.js"><link rel="prefetch" href="/wangdoc/assets/js/53.c2c2b1fa.js"><link rel="prefetch" href="/wangdoc/assets/js/54.6feeeb84.js"><link rel="prefetch" href="/wangdoc/assets/js/55.808d2125.js"><link rel="prefetch" href="/wangdoc/assets/js/56.deaa66cb.js"><link rel="prefetch" href="/wangdoc/assets/js/57.b5db8ee3.js"><link rel="prefetch" href="/wangdoc/assets/js/58.f719c564.js"><link rel="prefetch" href="/wangdoc/assets/js/59.f679c996.js"><link rel="prefetch" href="/wangdoc/assets/js/6.e73d1c0a.js"><link rel="prefetch" href="/wangdoc/assets/js/60.01882b8f.js"><link rel="prefetch" href="/wangdoc/assets/js/61.024fa35f.js"><link rel="prefetch" href="/wangdoc/assets/js/62.cc7e8280.js"><link rel="prefetch" href="/wangdoc/assets/js/63.75459a91.js"><link rel="prefetch" href="/wangdoc/assets/js/64.2d330a94.js"><link rel="prefetch" href="/wangdoc/assets/js/65.5505951d.js"><link rel="prefetch" href="/wangdoc/assets/js/66.01178aa8.js"><link rel="prefetch" href="/wangdoc/assets/js/67.db24a774.js"><link rel="prefetch" href="/wangdoc/assets/js/69.9006ec12.js"><link rel="prefetch" href="/wangdoc/assets/js/7.1cf9234b.js"><link rel="prefetch" href="/wangdoc/assets/js/70.e3e09ec2.js"><link rel="prefetch" href="/wangdoc/assets/js/71.6fd94d1d.js"><link rel="prefetch" href="/wangdoc/assets/js/72.47af9285.js"><link rel="prefetch" href="/wangdoc/assets/js/73.8616a5b7.js"><link rel="prefetch" href="/wangdoc/assets/js/74.14894b42.js"><link rel="prefetch" href="/wangdoc/assets/js/75.d341ec20.js"><link rel="prefetch" href="/wangdoc/assets/js/76.4ffc32bc.js"><link rel="prefetch" href="/wangdoc/assets/js/77.aff4cbd1.js"><link rel="prefetch" href="/wangdoc/assets/js/78.ec37d73f.js"><link rel="prefetch" href="/wangdoc/assets/js/79.07fc5bb3.js"><link rel="prefetch" href="/wangdoc/assets/js/8.329baaa5.js"><link rel="prefetch" href="/wangdoc/assets/js/80.14824d90.js"><link rel="prefetch" href="/wangdoc/assets/js/81.76626d4f.js"><link rel="prefetch" href="/wangdoc/assets/js/82.9d73e231.js"><link rel="prefetch" href="/wangdoc/assets/js/83.c3bdcee0.js"><link rel="prefetch" href="/wangdoc/assets/js/84.ac8a7e3b.js"><link rel="prefetch" href="/wangdoc/assets/js/85.0d32b3d5.js"><link rel="prefetch" href="/wangdoc/assets/js/86.8aeb89ff.js"><link rel="prefetch" href="/wangdoc/assets/js/87.fd64aa61.js"><link rel="prefetch" href="/wangdoc/assets/js/88.9da6635a.js"><link rel="prefetch" href="/wangdoc/assets/js/89.e966656e.js"><link rel="prefetch" href="/wangdoc/assets/js/9.8f332061.js"><link rel="prefetch" href="/wangdoc/assets/js/90.70c4ec59.js"><link rel="prefetch" href="/wangdoc/assets/js/91.a334b611.js"><link rel="prefetch" href="/wangdoc/assets/js/92.9214298e.js"><link rel="prefetch" href="/wangdoc/assets/js/93.68cedc81.js"><link rel="prefetch" href="/wangdoc/assets/js/94.572f645a.js"><link rel="prefetch" href="/wangdoc/assets/js/95.fdaacb9c.js"><link rel="prefetch" href="/wangdoc/assets/js/96.4a04f1b6.js"><link rel="prefetch" href="/wangdoc/assets/js/97.5e22edd4.js"><link rel="prefetch" href="/wangdoc/assets/js/98.18154198.js"><link rel="prefetch" href="/wangdoc/assets/js/99.9c3f7eff.js">
    <link rel="stylesheet" href="/wangdoc/assets/css/0.styles.b8e2a6d5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="tulp-scrollbar"><div class="scrollbar-wrapper tulp-scrollbar__wrap tulp-scrollbar__wrap--hidden-default"><div class="tulp-scrollbar__view"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/wangdoc/" class="home-link router-link-active"><!----> <span class="site-name">WangDoc</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----> <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="icon search-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M18.319 14.4326C20.7628 11.2941 20.542 6.75347 17.6569 3.86829C14.5327 0.744098 9.46734 0.744098 6.34315 3.86829C3.21895 6.99249 3.21895 12.0578 6.34315 15.182C9.22833 18.0672 13.769 18.2879 16.9075 15.8442C16.921 15.8595 16.9351 15.8745 16.9497 15.8891L21.1924 20.1317C21.5829 20.5223 22.2161 20.5223 22.6066 20.1317C22.9971 19.7412 22.9971 19.1081 22.6066 18.7175L18.364 14.4749C18.3493 14.4603 18.3343 14.4462 18.319 14.4326ZM16.2426 5.28251C18.5858 7.62565 18.5858 11.4246 16.2426 13.7678C13.8995 16.1109 10.1005 16.1109 7.75736 13.7678C5.41421 11.4246 5.41421 7.62565 7.75736 5.28251C10.1005 2.93936 13.8995 2.93936 16.2426 5.28251Z"></path></svg></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/wangdoc/html/" class="nav-link">
  HTML 教程
</a></div><div class="nav-item"><a href="/wangdoc/js/" class="nav-link">
  JavaScript 教程
</a></div><div class="nav-item"><a href="/wangdoc/es6/" class="nav-link">
  ES6 教程
</a></div><div class="nav-item"><a href="/wangdoc/webapi/" class="nav-link">
  Web API 教程
</a></div><div class="nav-item"><a href="/wangdoc/bash/" class="nav-link router-link-active">
  Bash 脚本教程
</a></div><div class="nav-item"><a href="/wangdoc/ssh/" class="nav-link">
  SSH 教程
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="相关链接" class="dropdown-title"><span class="title">相关链接</span> <span class="arrow down"></span></button> <button type="button" aria-label="相关链接" class="mobile-dropdown-title"><span class="title">相关链接</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/uphg/wangdoc" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://wangdoc.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  网道
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><div class="tulp-scrollbar"><div class="scrollbar-wrapper tulp-scrollbar__wrap tulp-scrollbar__wrap--hidden-default"><div class="tulp-scrollbar__view"><nav class="nav-links"><div class="nav-item"><a href="/wangdoc/html/" class="nav-link">
  HTML 教程
</a></div><div class="nav-item"><a href="/wangdoc/js/" class="nav-link">
  JavaScript 教程
</a></div><div class="nav-item"><a href="/wangdoc/es6/" class="nav-link">
  ES6 教程
</a></div><div class="nav-item"><a href="/wangdoc/webapi/" class="nav-link">
  Web API 教程
</a></div><div class="nav-item"><a href="/wangdoc/bash/" class="nav-link router-link-active">
  Bash 脚本教程
</a></div><div class="nav-item"><a href="/wangdoc/ssh/" class="nav-link">
  SSH 教程
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="相关链接" class="dropdown-title"><span class="title">相关链接</span> <span class="arrow down"></span></button> <button type="button" aria-label="相关链接" class="mobile-dropdown-title"><span class="title">相关链接</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/uphg/wangdoc" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://wangdoc.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  网道
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Bash 脚本教程</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wangdoc/bash/" aria-current="page" class="sidebar-link">文档说明</a></li><li><a href="/wangdoc/bash/intro.html" class="sidebar-link">Bash 简介</a></li><li><a href="/wangdoc/bash/grammar.html" class="sidebar-link">Bash 的基本语法</a></li><li><a href="/wangdoc/bash/expansion.html" class="sidebar-link">Bash 的模式扩展</a></li><li><a href="/wangdoc/bash/quotation.html" class="sidebar-link">引号和转义</a></li><li><a href="/wangdoc/bash/variable.html" class="sidebar-link">Bash 变量</a></li><li><a href="/wangdoc/bash/string.html" class="sidebar-link">字符串操作</a></li><li><a href="/wangdoc/bash/arithmetic.html" class="sidebar-link">Bash 的算术运算</a></li><li><a href="/wangdoc/bash/readline.html" class="sidebar-link">Bash 行操作</a></li><li><a href="/wangdoc/bash/stack.html" class="sidebar-link">目录堆栈</a></li><li><a href="/wangdoc/bash/script.html" class="sidebar-link">Bash 脚本入门</a></li><li><a href="/wangdoc/bash/read.html" class="sidebar-link">read 命令</a></li><li><a href="/wangdoc/bash/condition.html" aria-current="page" class="active sidebar-link">条件判断</a></li><li><a href="/wangdoc/bash/loop.html" class="sidebar-link">循环</a></li><li><a href="/wangdoc/bash/function.html" class="sidebar-link">Bash 函数</a></li><li><a href="/wangdoc/bash/array.html" class="sidebar-link">数组</a></li><li><a href="/wangdoc/bash/set.html" class="sidebar-link">set 命令，shopt 命令</a></li><li><a href="/wangdoc/bash/debug.html" class="sidebar-link">脚本除错</a></li><li><a href="/wangdoc/bash/mktemp.html" class="sidebar-link">mktemp 命令，trap 命令</a></li><li><a href="/wangdoc/bash/startup.html" class="sidebar-link">Bash 启动环境</a></li><li><a href="/wangdoc/bash/prompt.html" class="sidebar-link">命令提示符</a></li></ul></section></li></ul> </div></div><div class="tulp-scrollbar__bar is-horizontal"><div class="tulp-scrollbar__thumb" style="width:0;transform:translateX(0%);ms-transform:translateX(0%);webkit-transform:translateX(0%);"></div></div><div class="tulp-scrollbar__bar is-vertical"><div class="tulp-scrollbar__thumb" style="height:0;transform:translateY(0%);ms-transform:translateY(0%);webkit-transform:translateY(0%);"></div></div></div></aside> <main class="page"> <div class="re-page-top"><h2 class="title"><span>条件判断</span></h2></div> <div class="page-index"><div class="page-index-title"><span class="open-catalog"><svg aria-hidden="true" id="icon-arrow-right" viewBox="0 0 1024 1024" class="page-index-icon arrow-right"><path d="M797.21457646 444.0233542C639.18078066 323.41640029 481.14698487 202.80944727 323.13223847 82.18344394 266.85068662 39.24639688 185.76131065 79.36563623 185.76131065 150.16009062v723.67823145c0 70.7944544 81.08937597 110.91528018 137.37092782 67.95918369 158.01474638-120.60854033 316.04854219-241.21390605 474.08233799-361.83832207 44.83410644-34.21851065 44.83410644-101.69985674 0-135.93582949z"></path></svg> <span class="text">目录</span></span></div> <div class="page-index-content"><div class="page-catalog" style="display:none;"><div class="synopsis-wrap"><ul class="synopsis-ul"><li class="synopsis-li"><a href="/wangdoc/bash/condition.html#if-结构" class="synopsis-link">if 结构</a></li><li class="synopsis-li"><a href="/wangdoc/bash/condition.html#test-命令" class="synopsis-link">test 命令</a></li><li class="synopsis-li"><a href="/wangdoc/bash/condition.html#判断表达式" class="synopsis-link">判断表达式</a><ul class="synopsis-ul"><li class="synopsis-li"><a href="/wangdoc/bash/condition.html#文件判断" class="synopsis-link">文件判断</a></li><li class="synopsis-li"><a href="/wangdoc/bash/condition.html#字符串判断" class="synopsis-link">字符串判断</a></li><li class="synopsis-li"><a href="/wangdoc/bash/condition.html#整数判断" class="synopsis-link">整数判断</a></li><li class="synopsis-li"><a href="/wangdoc/bash/condition.html#正则判断" class="synopsis-link">正则判断</a></li><li class="synopsis-li"><a href="/wangdoc/bash/condition.html#test-判断的逻辑运算" class="synopsis-link">test 判断的逻辑运算</a></li><li class="synopsis-li"><a href="/wangdoc/bash/condition.html#算术判断" class="synopsis-link">算术判断</a></li><li class="synopsis-li"><a href="/wangdoc/bash/condition.html#普通命令的逻辑运算" class="synopsis-link">普通命令的逻辑运算</a></li></ul></li><li class="synopsis-li"><a href="/wangdoc/bash/condition.html#case-结构" class="synopsis-link">case 结构</a></li><li class="synopsis-li"><a href="/wangdoc/bash/condition.html#参考链接" class="synopsis-link">参考链接</a></li></ul></div></div></div></div> <div class="theme-default-content content__default"><h1 id="条件判断"><a href="#条件判断" class="header-anchor">#</a> 条件判断</h1> <p>本章介绍 Bash 脚本的条件判断语法。</p> <h2 id="if-结构"><a href="#if-结构" class="header-anchor">#</a> if 结构</h2> <p><code>if</code>是最常用的条件判断结构，只有符合给定条件时，才会执行指定的命令。它的语法如下。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">if</span> commands<span class="token punctuation">;</span> <span class="token keyword">then</span>
  commands
<span class="token punctuation">[</span>elif commands<span class="token punctuation">;</span> <span class="token keyword">then</span>
  commands<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
<span class="token punctuation">[</span>else
  commands<span class="token punctuation">]</span>
<span class="token keyword">fi</span>
</code></pre></div><p>这个命令分成三个部分：<code>if</code>、<code>elif</code>和<code>else</code>。其中，后两个部分是可选的。</p> <p><code>if</code>关键字后面是主要的判断条件，<code>elif</code>用来添加在主条件不成立时的其他判断条件，<code>else</code>则是所有条件都不成立时要执行的部分。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">if</span> <span class="token builtin class-name">test</span> <span class="token environment constant">$USER</span> <span class="token operator">=</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;Hello foo.&quot;</span>
<span class="token keyword">else</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;You are not foo.&quot;</span>
<span class="token keyword">fi</span>
</code></pre></div><p>上面的例子中，判断条件是环境变量<code>$USER</code>是否等于<code>foo</code>，如果等于就输出<code>Hello foo.</code>，否则输出其他内容。</p> <p><code>if</code>和<code>then</code>写在同一行时，需要分号分隔。分号是 Bash 的命令分隔符。它们也可以写成两行，这时不需要分号。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">if</span> <span class="token boolean">true</span>
<span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">'hello world'</span>
<span class="token keyword">fi</span>

<span class="token keyword">if</span> <span class="token boolean">false</span>
<span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">'it is false'</span> <span class="token comment"># 本行不会执行</span>
<span class="token keyword">fi</span>
</code></pre></div><p>上面的例子中，<code>true</code>和<code>false</code>是两个特殊命令，前者代表操作成功，后者代表操作失败。<code>if true</code>意味着命令部分总是会执行，<code>if false</code>意味着命令部分永远不会执行。</p> <p>除了多行的写法，<code>if</code>结构也可以写成单行。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token keyword">if</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token keyword">then</span> <span class="token builtin class-name">echo</span> <span class="token string">'hello world'</span><span class="token punctuation">;</span> <span class="token keyword">fi</span>
hello world

$ <span class="token keyword">if</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token keyword">then</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;It's true.&quot;</span><span class="token punctuation">;</span> <span class="token keyword">fi</span>
</code></pre></div><p>注意，<code>if</code>关键字后面也可以是一条命令，该条命令执行成功（返回值<code>0</code>），就意味着判断条件成立。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token keyword">if</span> <span class="token builtin class-name">echo</span> <span class="token string">'hi'</span><span class="token punctuation">;</span> <span class="token keyword">then</span> <span class="token builtin class-name">echo</span> <span class="token string">'hello world'</span><span class="token punctuation">;</span> <span class="token keyword">fi</span>
hi
hello world
</code></pre></div><p>上面命令中，<code>if</code>后面是一条命令<code>echo 'hi'</code>。该命令会执行，如果返回值是<code>0</code>，则执行<code>then</code>的部分。</p> <p><code>if</code>后面可以跟任意数量的命令。这时，所有命令都会执行，但是判断真伪只看最后一个命令，即使前面所有命令都失败，只要最后一个命令返回<code>0</code>，就会执行<code>then</code>的部分。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token keyword">if</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token keyword">then</span> <span class="token builtin class-name">echo</span> <span class="token string">'hello world'</span><span class="token punctuation">;</span> <span class="token keyword">fi</span>
hello world
</code></pre></div><p>上面例子中，<code>if</code>后面有两条命令（<code>false;true;</code>），第二条命令（<code>true</code>）决定了<code>then</code>的部分是否会执行。</p> <p><code>elif</code>部分可以有多个。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token builtin class-name">echo</span> -n <span class="token string">&quot;输入一个1到3之间的数字（包含两端）&gt; &quot;</span>
<span class="token builtin class-name">read</span> character
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$character</span>&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;1&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token number">1</span>
<span class="token keyword">elif</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$character</span>&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;2&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token number">2</span>
<span class="token keyword">elif</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$character</span>&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;3&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token number">3</span>
<span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span> 输入不符合要求
<span class="token keyword">fi</span>
</code></pre></div><p>上面例子中，如果用户输入<code>3</code>，就会连续判断3次。</p> <h2 id="test-命令"><a href="#test-命令" class="header-anchor">#</a> test 命令</h2> <p><code>if</code>结构的判断条件，一般使用<code>test</code>命令，有三种形式。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 写法一</span>
<span class="token builtin class-name">test</span> expression

<span class="token comment"># 写法二</span>
<span class="token punctuation">[</span> expression <span class="token punctuation">]</span>

<span class="token comment"># 写法三</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span> expression <span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre></div><p>上面三种形式是等价的，但是第三种形式还支持正则判断，前两种不支持。</p> <p>上面的<code>expression</code>是一个表达式。这个表达式为真，<code>test</code>命令执行成功（返回值为<code>0</code>）；表达式为伪，<code>test</code>命令执行失败（返回值为<code>1</code>）。注意，第二种和第三种写法，<code>[</code>和<code>]</code>与内部的表达式之间必须有空格。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token builtin class-name">test</span> -f /etc/hosts
$ <span class="token builtin class-name">echo</span> <span class="token variable">$?</span>
<span class="token number">0</span>

$ <span class="token punctuation">[</span> -f /etc/hosts <span class="token punctuation">]</span>
$  <span class="token builtin class-name">echo</span> <span class="token variable">$?</span>
<span class="token number">0</span>
</code></pre></div><p>上面的例子中，<code>test</code>命令采用两种写法，判断<code>/etc/hosts</code>文件是否存在，这两种写法是等价的。命令执行后，返回值为<code>0</code>，表示该文件确实存在。</p> <p>实际上，<code>[</code>这个字符是<code>test</code>命令的一种简写形式，可以看作是一个独立的命令，这解释了为什么它后面必须有空格。</p> <p>下面把<code>test</code>命令的三种形式，用在<code>if</code>结构中，判断一个文件是否存在。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 写法一</span>
<span class="token keyword">if</span> <span class="token builtin class-name">test</span> -e /tmp/foo.txt <span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;Found foo.txt&quot;</span>
<span class="token keyword">fi</span>

<span class="token comment"># 写法二</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> -e /tmp/foo.txt <span class="token punctuation">]</span> <span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;Found foo.txt&quot;</span>
<span class="token keyword">fi</span>

<span class="token comment"># 写法三</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> -e /tmp/foo.txt <span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;Found foo.txt&quot;</span>
<span class="token keyword">fi</span>
</code></pre></div><h2 id="判断表达式"><a href="#判断表达式" class="header-anchor">#</a> 判断表达式</h2> <p><code>if</code>关键字后面，跟的是一个命令。这个命令可以是<code>test</code>命令，也可以是其他命令。命令的返回值为<code>0</code>表示判断成立，否则表示不成立。因为这些命令主要是为了得到返回值，所以可以视为表达式。</p> <p>常用的判断表达式有下面这些。</p> <h3 id="文件判断"><a href="#文件判断" class="header-anchor">#</a> 文件判断</h3> <p>以下表达式用来判断文件状态。</p> <ul><li><code>[ -a file ]</code>：如果 file 存在，则为<code>true</code>。</li> <li><code>[ -b file ]</code>：如果 file 存在并且是一个块（设备）文件，则为<code>true</code>。</li> <li><code>[ -c file ]</code>：如果 file 存在并且是一个字符（设备）文件，则为<code>true</code>。</li> <li><code>[ -d file ]</code>：如果 file 存在并且是一个目录，则为<code>true</code>。</li> <li><code>[ -e file ]</code>：如果 file 存在，则为<code>true</code>。</li> <li><code>[ -f file ]</code>：如果 file 存在并且是一个普通文件，则为<code>true</code>。</li> <li><code>[ -g file ]</code>：如果 file 存在并且设置了组 ID，则为<code>true</code>。</li> <li><code>[ -G file ]</code>：如果 file 存在并且属于有效的组 ID，则为<code>true</code>。</li> <li><code>[ -h file ]</code>：如果 file 存在并且是符号链接，则为<code>true</code>。</li> <li><code>[ -k file ]</code>：如果 file 存在并且设置了它的“sticky bit”，则为<code>true</code>。</li> <li><code>[ -L file ]</code>：如果 file 存在并且是一个符号链接，则为<code>true</code>。</li> <li><code>[ -N file ]</code>：如果 file 存在并且自上次读取后已被修改，则为<code>true</code>。</li> <li><code>[ -O file ]</code>：如果 file 存在并且属于有效的用户 ID，则为<code>true</code>。</li> <li><code>[ -p file ]</code>：如果 file 存在并且是一个命名管道，则为<code>true</code>。</li> <li><code>[ -r file ]</code>：如果 file 存在并且可读（当前用户有可读权限），则为<code>true</code>。</li> <li><code>[ -s file ]</code>：如果 file 存在且其长度大于零，则为<code>true</code>。</li> <li><code>[ -S file ]</code>：如果 file 存在且是一个网络 socket，则为<code>true</code>。</li> <li><code>[ -t fd ]</code>：如果 fd 是一个文件描述符，并且重定向到终端，则为<code>true</code>。 这可以用来判断是否重定向了标准输入／输出／错误。</li> <li><code>[ -u file ]</code>：如果 file 存在并且设置了 setuid 位，则为<code>true</code>。</li> <li><code>[ -w file ]</code>：如果 file 存在并且可写（当前用户拥有可写权限），则为<code>true</code>。</li> <li><code>[ -x file ]</code>：如果 file 存在并且可执行（有效用户有执行／搜索权限），则为<code>true</code>。</li> <li><code>[ file1 -nt file2 ]</code>：如果 FILE1 比 FILE2 的更新时间最近，或者 FILE1 存在而 FILE2 不存在，则为<code>true</code>。</li> <li><code>[ file1 -ot file2 ]</code>：如果 FILE1 比 FILE2 的更新时间更旧，或者 FILE2 存在而 FILE1 不存在，则为<code>true</code>。</li> <li><code>[ FILE1 -ef FILE2 ]</code>：如果 FILE1 和 FILE2 引用相同的设备和 inode 编号，则为<code>true</code>。</li></ul> <p>下面是一个示例。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token assign-left variable">FILE</span><span class="token operator">=~</span>/.bashrc

<span class="token keyword">if</span> <span class="token punctuation">[</span> -e <span class="token string">&quot;<span class="token variable">$FILE</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> -f <span class="token string">&quot;<span class="token variable">$FILE</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$FILE</span> is a regular file.&quot;</span>
  <span class="token keyword">fi</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> -d <span class="token string">&quot;<span class="token variable">$FILE</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$FILE</span> is a directory.&quot;</span>
  <span class="token keyword">fi</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> -r <span class="token string">&quot;<span class="token variable">$FILE</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$FILE</span> is readable.&quot;</span>
  <span class="token keyword">fi</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> -w <span class="token string">&quot;<span class="token variable">$FILE</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$FILE</span> is writable.&quot;</span>
  <span class="token keyword">fi</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> -x <span class="token string">&quot;<span class="token variable">$FILE</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$FILE</span> is executable/searchable.&quot;</span>
  <span class="token keyword">fi</span>
<span class="token keyword">else</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$FILE</span> does not exist&quot;</span>
  <span class="token builtin class-name">exit</span> <span class="token number">1</span>
<span class="token keyword">fi</span>
</code></pre></div><p>上面代码中，<code>$FILE</code>要放在双引号之中。这样可以防止<code>$FILE</code>为空，因为这时<code>[ -e ]</code>会判断为真。而放在双引号之中，返回的就总是一个空字符串，<code>[ -e &quot;&quot; ]</code>会判断为伪。</p> <h3 id="字符串判断"><a href="#字符串判断" class="header-anchor">#</a> 字符串判断</h3> <p>以下表达式用来判断字符串。</p> <ul><li><code>[ string ]</code>：如果<code>string</code>不为空（长度大于0），则判断为真。</li> <li><code>[ -n string ]</code>：如果字符串<code>string</code>的长度大于零，则判断为真。</li> <li><code>[ -z string ]</code>：如果字符串<code>string</code>的长度为零，则判断为真。</li> <li><code>[ string1 = string2 ]</code>：如果<code>string1</code>和<code>string2</code>相同，则判断为真。</li> <li><code>[ string1 == string2 ]</code> 等同于<code>[ string1 = string2 ]</code>。</li> <li><code>[ string1 != string2 ]</code>：如果<code>string1</code>和<code>string2</code>不相同，则判断为真。</li> <li><code>[ string1 '&gt;' string2 ]</code>：如果按照字典顺序<code>string1</code>排列在<code>string2</code>之后，则判断为真。</li> <li><code>[ string1 '&lt;' string2 ]</code>：如果按照字典顺序<code>string1</code>排列在<code>string2</code>之前，则判断为真。</li></ul> <p>注意，<code>test</code>命令内部的<code>&gt;</code>和<code>&lt;</code>，必须用引号引起来（或者是用反斜杠转义）。否则，它们会被 shell 解释为重定向操作符。</p> <p>下面是一个示例。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token assign-left variable">ANSWER</span><span class="token operator">=</span>maybe

<span class="token keyword">if</span> <span class="token punctuation">[</span> -z <span class="token string">&quot;<span class="token variable">$ANSWER</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;There is no answer.&quot;</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;2</span>
  <span class="token builtin class-name">exit</span> <span class="token number">1</span>
<span class="token keyword">fi</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$ANSWER</span>&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;yes&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;The answer is YES.&quot;</span>
<span class="token keyword">elif</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$ANSWER</span>&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;no&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;The answer is NO.&quot;</span>
<span class="token keyword">elif</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$ANSWER</span>&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;maybe&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;The answer is MAYBE.&quot;</span>
<span class="token keyword">else</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;The answer is UNKNOWN.&quot;</span>
<span class="token keyword">fi</span>
</code></pre></div><p>上面代码中，首先确定<code>$ANSWER</code>字符串是否为空。如果为空，就终止脚本，并把退出状态设为<code>1</code>。注意，这里的<code>echo</code>命令把错误信息<code>There is no answer.</code>重定向到标准错误，这是处理错误信息的常用方法。如果<code>$ANSWER</code>字符串不为空，就判断它的值是否等于<code>yes</code>、<code>no</code>或者<code>maybe</code>。</p> <p>注意，字符串判断时，变量要放在双引号之中，比如<code>[ -n &quot;$COUNT&quot; ]</code>，否则变量替换成字符串以后，<code>test</code>命令可能会报错，提示参数过多。另外，如果不放在双引号之中，变量为空时，命令会变成<code>[ -n ]</code>，这时会判断为真。如果放在双引号之中，<code>[ -n &quot;&quot; ]</code>就判断为伪。</p> <h3 id="整数判断"><a href="#整数判断" class="header-anchor">#</a> 整数判断</h3> <p>下面的表达式用于判断整数。</p> <ul><li><code>[ integer1 -eq integer2 ]</code>：如果<code>integer1</code>等于<code>integer2</code>，则为<code>true</code>。</li> <li><code>[ integer1 -ne integer2 ]</code>：如果<code>integer1</code>不等于<code>integer2</code>，则为<code>true</code>。</li> <li><code>[ integer1 -le integer2 ]</code>：如果<code>integer1</code>小于或等于<code>integer2</code>，则为<code>true</code>。</li> <li><code>[ integer1 -lt integer2 ]</code>：如果<code>integer1</code>小于<code>integer2</code>，则为<code>true</code>。</li> <li><code>[ integer1 -ge integer2 ]</code>：如果<code>integer1</code>大于或等于<code>integer2</code>，则为<code>true</code>。</li> <li><code>[ integer1 -gt integer2 ]</code>：如果<code>integer1</code>大于<code>integer2</code>，则为<code>true</code>。</li></ul> <p>下面是一个用法的例子。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token assign-left variable">INT</span><span class="token operator">=</span>-5

<span class="token keyword">if</span> <span class="token punctuation">[</span> -z <span class="token string">&quot;<span class="token variable">$INT</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;INT is empty.&quot;</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;2</span>
  <span class="token builtin class-name">exit</span> <span class="token number">1</span>
<span class="token keyword">fi</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$INT</span> -eq <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;INT is zero.&quot;</span>
<span class="token keyword">else</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$INT</span> -lt <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;INT is negative.&quot;</span>
  <span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;INT is positive.&quot;</span>
  <span class="token keyword">fi</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable"><span class="token variable">$((</span>INT <span class="token operator">%</span> <span class="token number">2</span><span class="token variable">))</span></span> -eq <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;INT is even.&quot;</span>
  <span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;INT is odd.&quot;</span>
  <span class="token keyword">fi</span>
<span class="token keyword">fi</span>
</code></pre></div><p>上面例子中，先判断变量<code>$INT</code>是否为空，然后判断是否为<code>0</code>，接着判断正负，最后通过求余数判断奇偶。</p> <h3 id="正则判断"><a href="#正则判断" class="header-anchor">#</a> 正则判断</h3> <p><code>[[ expression ]]</code>这种判断形式，支持正则表达式。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span><span class="token punctuation">[</span> string1 <span class="token operator">=~</span> regex <span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre></div><p>上面的语法中，<code>regex</code>是一个正则表示式，<code>=~</code>是正则比较运算符。</p> <p>下面是一个例子。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token assign-left variable">INT</span><span class="token operator">=</span>-5

<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$INT</span>&quot;</span> <span class="token operator">=~</span> ^-?<span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span>+$ <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;INT is an integer.&quot;</span>
  <span class="token builtin class-name">exit</span> <span class="token number">0</span>
<span class="token keyword">else</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;INT is not an integer.&quot;</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;2</span>
  <span class="token builtin class-name">exit</span> <span class="token number">1</span>
<span class="token keyword">fi</span>
</code></pre></div><p>上面代码中，先判断变量<code>INT</code>的字符串形式，是否满足<code>^-?[0-9]+$</code>的正则模式，如果满足就表明它是一个整数。</p> <h3 id="test-判断的逻辑运算"><a href="#test-判断的逻辑运算" class="header-anchor">#</a> test 判断的逻辑运算</h3> <p>通过逻辑运算，可以把多个<code>test</code>判断表达式结合起来，创造更复杂的判断。三种逻辑运算<code>AND</code>，<code>OR</code>，和<code>NOT</code>，都有自己的专用符号。</p> <ul><li><code>AND</code>运算：符号<code>&amp;&amp;</code>，也可使用参数<code>-a</code>。</li> <li><code>OR</code>运算：符号<code>||</code>，也可使用参数<code>-o</code>。</li> <li><code>NOT</code>运算：符号<code>!</code>。</li></ul> <p>下面是一个<code>AND</code>的例子，判断整数是否在某个范围之内。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token assign-left variable">MIN_VAL</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">MAX_VAL</span><span class="token operator">=</span><span class="token number">100</span>

<span class="token assign-left variable">INT</span><span class="token operator">=</span><span class="token number">50</span>

<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$INT</span>&quot;</span> <span class="token operator">=~</span> ^-?<span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span>+$ <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token variable">$INT</span> -ge <span class="token variable">$MIN_VAL</span> <span class="token operator">&amp;&amp;</span> <span class="token variable">$INT</span> -le <span class="token variable">$MAX_VAL</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$INT</span> is within <span class="token variable">$MIN_VAL</span> to <span class="token variable">$MAX_VAL</span>.&quot;</span>
  <span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$INT</span> is out of range.&quot;</span>
  <span class="token keyword">fi</span>
<span class="token keyword">else</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;INT is not an integer.&quot;</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;2</span>
  <span class="token builtin class-name">exit</span> <span class="token number">1</span>
<span class="token keyword">fi</span>
</code></pre></div><p>上面例子中，<code>&amp;&amp;</code>用来连接两个判断条件：大于等于<code>$MIN_VAL</code>，并且小于等于<code>$MAX_VAL</code>。</p> <p>使用否定操作符<code>!</code>时，最好用圆括号确定转义的范围。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token punctuation">\</span><span class="token punctuation">(</span> <span class="token variable">$INT</span> -ge <span class="token variable">$MIN_VAL</span> -a <span class="token variable">$INT</span> -le <span class="token variable">$MAX_VAL</span> <span class="token punctuation">\</span><span class="token punctuation">)</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$INT</span> is outside <span class="token variable">$MIN_VAL</span> to <span class="token variable">$MAX_VAL</span>.&quot;</span>
<span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$INT</span> is in range.&quot;</span>
<span class="token keyword">fi</span>
</code></pre></div><p>上面例子中，<code>test</code>命令内部使用的圆括号，必须使用引号或者转义，否则会被 Bash 解释。</p> <h3 id="算术判断"><a href="#算术判断" class="header-anchor">#</a> 算术判断</h3> <p>Bash 还提供了<code>((...))</code>作为算术条件，进行算术运算的判断。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">if</span> <span class="token variable"><span class="token punctuation">((</span><span class="token number">3</span> <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">))</span></span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;true&quot;</span>
<span class="token keyword">fi</span>
</code></pre></div><p>上面代码执行后，会打印出<code>true</code>。</p> <p>注意，算术判断不需要使用<code>test</code>命令，而是直接使用<code>((...))</code>结构。这个结构的返回值，决定了判断的真伪。</p> <p>如果算术计算的结果是非零值，则表示判断成立。这一点跟命令的返回值正好相反，需要小心。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token keyword">if</span> <span class="token variable"><span class="token punctuation">((</span><span class="token number">1</span><span class="token punctuation">))</span></span><span class="token punctuation">;</span> <span class="token keyword">then</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;It is true.&quot;</span><span class="token punctuation">;</span> <span class="token keyword">fi</span>
It is true.
$ <span class="token keyword">if</span> <span class="token variable"><span class="token punctuation">((</span><span class="token number">0</span><span class="token punctuation">))</span></span><span class="token punctuation">;</span> <span class="token keyword">then</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;It is true.&quot;</span><span class="token punctuation">;</span> <span class="token keyword">else</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;it is false.&quot;</span><span class="token punctuation">;</span> <span class="token keyword">fi</span>
It is false.
</code></pre></div><p>上面例子中，<code>((1))</code>表示判断成立，<code>((0))</code>表示判断不成立。</p> <p>算术条件<code>((...))</code>也可以用于变量赋值。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token keyword">if</span> <span class="token variable"><span class="token punctuation">((</span> foo <span class="token operator">=</span> <span class="token number">5</span> <span class="token punctuation">))</span></span><span class="token punctuation">;</span><span class="token keyword">then</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;foo is <span class="token variable">$foo</span>&quot;</span><span class="token punctuation">;</span> <span class="token keyword">fi</span>
foo is <span class="token number">5</span>
</code></pre></div><p>上面例子中，<code>(( foo = 5 ))</code>完成了两件事情。首先把<code>5</code>赋值给变量<code>foo</code>，然后根据返回值<code>5</code>，判断条件为真。</p> <p>注意，赋值语句返回等号右边的值，如果返回的是<code>0</code>，则判断为假。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token keyword">if</span> <span class="token variable"><span class="token punctuation">((</span> foo <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">))</span></span><span class="token punctuation">;</span><span class="token keyword">then</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;It is true.&quot;</span><span class="token punctuation">;</span><span class="token keyword">else</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;It is false.&quot;</span><span class="token punctuation">;</span> <span class="token keyword">fi</span>
It is false.
</code></pre></div><p>下面是用算术条件改写的数值判断脚本。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token assign-left variable">INT</span><span class="token operator">=</span>-5

<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$INT</span>&quot;</span> <span class="token operator">=~</span> ^-?<span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span>+$ <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token keyword">if</span> <span class="token variable"><span class="token punctuation">((</span>INT <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">))</span></span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;INT is zero.&quot;</span>
  <span class="token keyword">else</span>
    <span class="token keyword">if</span> <span class="token variable"><span class="token punctuation">((</span>INT <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">))</span></span><span class="token punctuation">;</span> <span class="token keyword">then</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;INT is negative.&quot;</span>
    <span class="token keyword">else</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;INT is positive.&quot;</span>
    <span class="token keyword">fi</span>
    <span class="token keyword">if</span> <span class="token variable"><span class="token punctuation">((</span> <span class="token punctuation">((</span>INT <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">))</span></span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">))</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;INT is even.&quot;</span>
    <span class="token keyword">else</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;INT is odd.&quot;</span>
    <span class="token keyword">fi</span>
  <span class="token keyword">fi</span>
<span class="token keyword">else</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;INT is not an integer.&quot;</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;2</span>
  <span class="token builtin class-name">exit</span> <span class="token number">1</span>
<span class="token keyword">fi</span>
</code></pre></div><p>只要是算术表达式，都能用于<code>((...))</code>语法，详见《Bash 的算术运算》一章。</p> <h3 id="普通命令的逻辑运算"><a href="#普通命令的逻辑运算" class="header-anchor">#</a> 普通命令的逻辑运算</h3> <p>如果<code>if</code>结构使用的不是<code>test</code>命令，而是普通命令，比如上一节的<code>((...))</code>算术运算，或者<code>test</code>命令与普通命令混用，那么可以使用 Bash 的命令控制操作符<code>&amp;&amp;</code>（AND）和<code>||</code>（OR），进行多个命令的逻辑运算。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ command1 <span class="token operator">&amp;&amp;</span> command2
$ command1 <span class="token operator">||</span> command2
</code></pre></div><p>对于<code>&amp;&amp;</code>操作符，先执行<code>command1</code>，只有<code>command1</code>执行成功后， 才会执行<code>command2</code>。对于<code>||</code>操作符，先执行<code>command1</code>，只有<code>command1</code>执行失败后， 才会执行<code>command2</code>。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">mkdir</span> temp <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> temp
</code></pre></div><p>上面的命令会创建一个名为<code>temp</code>的目录，执行成功后，才会执行第二个命令，进入这个目录。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token punctuation">[</span> -d temp <span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token function">mkdir</span> temp
</code></pre></div><p>上面的命令会测试目录<code>temp</code>是否存在，如果不存在，就会执行第二个命令，创建这个目录。这种写法非常有助于在脚本中处理错误。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span> <span class="token operator">!</span> -d temp <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">exit</span> <span class="token number">1</span>
</code></pre></div><p>上面的命令中，如果<code>temp</code>子目录不存在，脚本会终止，并且返回值为<code>1</code>。</p> <p>下面就是<code>if</code>与<code>&amp;&amp;</code>结合使用的写法。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">if</span> <span class="token punctuation">[</span> condition <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">[</span> condition <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">command</span>
<span class="token keyword">fi</span>
</code></pre></div><p>下面是一个示例。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token shebang important">#! /bin/bash</span>

<span class="token assign-left variable">filename</span><span class="token operator">=</span><span class="token variable">$1</span>
<span class="token assign-left variable">word1</span><span class="token operator">=</span><span class="token variable">$2</span>
<span class="token assign-left variable">word2</span><span class="token operator">=</span><span class="token variable">$3</span>

<span class="token keyword">if</span> <span class="token function">grep</span> <span class="token variable">$word1</span> <span class="token variable">$filename</span> <span class="token operator">&amp;&amp;</span> <span class="token function">grep</span> <span class="token variable">$word2</span> <span class="token variable">$filename</span>
<span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$word1</span> and <span class="token variable">$word2</span> are both in <span class="token variable">$filename</span>.&quot;</span>
<span class="token keyword">fi</span>
</code></pre></div><p>上面的例子只有在指定文件里面，同时存在搜索词<code>word1</code>和<code>word2</code>，就会执行<code>if</code>的命令部分。</p> <p>下面的示例演示如何将一个<code>&amp;&amp;</code>判断表达式，改写成对应的<code>if</code>结构。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span><span class="token punctuation">[</span> -d <span class="token string">&quot;<span class="token variable">$dir_name</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> <span class="token string">&quot;<span class="token variable">$dir_name</span>&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token function">rm</span> *

<span class="token comment"># 等同于</span>

<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;<span class="token variable">$dir_name</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;No such directory: '<span class="token variable">$dir_name</span>'&quot;</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;2</span>
  <span class="token builtin class-name">exit</span> <span class="token number">1</span>
<span class="token keyword">fi</span>
<span class="token keyword">if</span> <span class="token operator">!</span> <span class="token builtin class-name">cd</span> <span class="token string">&quot;<span class="token variable">$dir_name</span>&quot;</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;Cannot cd to '<span class="token variable">$dir_name</span>'&quot;</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;2</span>
  <span class="token builtin class-name">exit</span> <span class="token number">1</span>
<span class="token keyword">fi</span>
<span class="token keyword">if</span> <span class="token operator">!</span> <span class="token function">rm</span> *<span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;File deletion failed. Check results&quot;</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;2</span>
  <span class="token builtin class-name">exit</span> <span class="token number">1</span>
<span class="token keyword">fi</span>
</code></pre></div><h2 id="case-结构"><a href="#case-结构" class="header-anchor">#</a> case 结构</h2> <p><code>case</code>结构用于多值判断，可以为每个值指定对应的命令，跟包含多个<code>elif</code>的<code>if</code>结构等价，但是语义更好。它的语法如下。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">case</span> expression <span class="token keyword">in</span>
  pattern <span class="token punctuation">)</span>
    commands <span class="token punctuation">;</span><span class="token punctuation">;</span>
  pattern <span class="token punctuation">)</span>
    commands <span class="token punctuation">;</span><span class="token punctuation">;</span>
  <span class="token punctuation">..</span>.
<span class="token keyword">esac</span>
</code></pre></div><p>上面代码中，<code>expression</code>是一个表达式，<code>pattern</code>是表达式的值或者一个模式，可以有多条，用来匹配多个值，每条以两个分号（<code>;</code>）结尾。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token builtin class-name">echo</span> -n <span class="token string">&quot;输入一个1到3之间的数字（包含两端）&gt; &quot;</span>
<span class="token builtin class-name">read</span> character
<span class="token keyword">case</span> <span class="token variable">$character</span> <span class="token keyword">in</span>
  <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token number">1</span>
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
  <span class="token number">2</span> <span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token number">2</span>
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
  <span class="token number">3</span> <span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token number">3</span>
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
  * <span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> 输入不符合要求
<span class="token keyword">esac</span>
</code></pre></div><p>上面例子中，最后一条匹配语句的模式是<code>*</code>，这个通配符可以匹配其他字符和没有输入字符的情况，类似<code>if</code>的<code>else</code>部分。</p> <p>下面是另一个例子。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token assign-left variable">OS</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> -s<span class="token variable">)</span></span>

<span class="token keyword">case</span> <span class="token string">&quot;<span class="token variable">$OS</span>&quot;</span> <span class="token keyword">in</span>
  FreeBSD<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;This is FreeBSD&quot;</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
  Darwin<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;This is Mac OSX&quot;</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
  AIX<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;This is AIX&quot;</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
  Minix<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;This is Minix&quot;</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
  Linux<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;This is Linux&quot;</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
  *<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;Failed to identify this OS&quot;</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>
</code></pre></div><p>上面的例子判断当前是什么操作系统。</p> <p><code>case</code>的匹配模式可以使用各种通配符，下面是一些例子。</p> <ul><li><code>a)</code>：匹配<code>a</code>。</li> <li><code>a|b)</code>：匹配<code>a</code>或<code>b</code>。</li> <li><code>[[:alpha:]])</code>：匹配单个字母。</li> <li><code>???)</code>：匹配3个字符的单词。</li> <li><code>*.txt)</code>：匹配<code>.txt</code>结尾。</li> <li><code>*)</code>：匹配任意输入，通过作为<code>case</code>结构的最后一个模式。</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token builtin class-name">echo</span> -n <span class="token string">&quot;输入一个字母或数字 &gt; &quot;</span>
<span class="token builtin class-name">read</span> character
<span class="token keyword">case</span> <span class="token variable">$character</span> <span class="token keyword">in</span>
  <span class="token punctuation">[</span><span class="token punctuation">[</span>:lower:<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>:upper:<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;输入了字母 <span class="token variable">$character</span>&quot;</span>
                              <span class="token punctuation">;</span><span class="token punctuation">;</span>
  <span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span> <span class="token punctuation">)</span>                     <span class="token builtin class-name">echo</span> <span class="token string">&quot;输入了数字 <span class="token variable">$character</span>&quot;</span>
                              <span class="token punctuation">;</span><span class="token punctuation">;</span>
  * <span class="token punctuation">)</span>                         <span class="token builtin class-name">echo</span> <span class="token string">&quot;输入不符合要求&quot;</span>
<span class="token keyword">esac</span>
</code></pre></div><p>上面例子中，使用通配符<code>[[:lower:]] | [[:upper:]]</code>匹配字母，<code>[0-9]</code>匹配数字。</p> <p>Bash 4.0之前，<code>case</code>结构只能匹配一个条件，然后就会退出<code>case</code>结构。Bash 4.0之后，允许匹配多个条件，这时可以用<code>;;&amp;</code>终止每个条件块。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># test.sh</span>

<span class="token builtin class-name">read</span> -n <span class="token number">1</span> -p <span class="token string">&quot;Type a character &gt; &quot;</span>
<span class="token builtin class-name">echo</span>
<span class="token keyword">case</span> <span class="token environment constant">$REPLY</span> <span class="token keyword">in</span>
  <span class="token punctuation">[</span><span class="token punctuation">[</span>:upper:<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token builtin class-name">echo</span> <span class="token string">&quot;'<span class="token environment constant">$REPLY</span>' is upper case.&quot;</span> <span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>
  <span class="token punctuation">[</span><span class="token punctuation">[</span>:lower:<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token builtin class-name">echo</span> <span class="token string">&quot;'<span class="token environment constant">$REPLY</span>' is lower case.&quot;</span> <span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>
  <span class="token punctuation">[</span><span class="token punctuation">[</span>:alpha:<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token builtin class-name">echo</span> <span class="token string">&quot;'<span class="token environment constant">$REPLY</span>' is alphabetic.&quot;</span> <span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>
  <span class="token punctuation">[</span><span class="token punctuation">[</span>:digit:<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token builtin class-name">echo</span> <span class="token string">&quot;'<span class="token environment constant">$REPLY</span>' is a digit.&quot;</span> <span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>
  <span class="token punctuation">[</span><span class="token punctuation">[</span>:graph:<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token builtin class-name">echo</span> <span class="token string">&quot;'<span class="token environment constant">$REPLY</span>' is a visible character.&quot;</span> <span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>
  <span class="token punctuation">[</span><span class="token punctuation">[</span>:punct:<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token builtin class-name">echo</span> <span class="token string">&quot;'<span class="token environment constant">$REPLY</span>' is a punctuation symbol.&quot;</span> <span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>
  <span class="token punctuation">[</span><span class="token punctuation">[</span>:space:<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token builtin class-name">echo</span> <span class="token string">&quot;'<span class="token environment constant">$REPLY</span>' is a whitespace character.&quot;</span> <span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>
  <span class="token punctuation">[</span><span class="token punctuation">[</span>:xdigit:<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>   <span class="token builtin class-name">echo</span> <span class="token string">&quot;'<span class="token environment constant">$REPLY</span>' is a hexadecimal digit.&quot;</span> <span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>
<span class="token keyword">esac</span>
</code></pre></div><p>执行上面的脚本，会得到下面的结果。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ test.sh
Type a character <span class="token operator">&gt;</span> a
<span class="token string">'a'</span> is lower case.
<span class="token string">'a'</span> is alphabetic.
<span class="token string">'a'</span> is a visible character.
<span class="token string">'a'</span> is a hexadecimal digit.
</code></pre></div><p>可以看到条件语句结尾添加了<code>;;&amp;</code>以后，在匹配一个条件之后，并没有退出<code>case</code>结构，而是继续判断下一个条件。</p> <h2 id="参考链接"><a href="#参考链接" class="header-anchor">#</a> 参考链接</h2> <ul><li><a href="http://linuxcommand.org/tlcl.php" target="_blank" rel="noopener noreferrer">The Linux Command Line<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, William Shotts</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2021-07-20 14:30</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" class="bi bi-chevron-left"><path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"></path></svg> <a href="/wangdoc/bash/read.html" class="prev">
        read 命令
      </a></span> <span class="next"><a href="/wangdoc/bash/loop.html">
        循环
      </a> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" class="bi bi-chevron-right"><path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"></path></svg></span></p></div> </main></div></div></div><div class="tulp-scrollbar__bar is-horizontal"><div class="tulp-scrollbar__thumb" style="width:0;transform:translateX(0%);ms-transform:translateX(0%);webkit-transform:translateX(0%);"></div></div><div class="tulp-scrollbar__bar is-vertical"><div class="tulp-scrollbar__thumb" style="height:0;transform:translateY(0%);ms-transform:translateY(0%);webkit-transform:translateY(0%);"></div></div></div><div class="global-ui"><!----></div></div>
    <script src="/wangdoc/assets/js/app.8723d088.js" defer></script><script src="/wangdoc/assets/js/2.9a1a264e.js" defer></script><script src="/wangdoc/assets/js/68.f463daf1.js" defer></script><script src="/wangdoc/assets/js/3.59361ec6.js" defer></script>
  </body>
</html>
