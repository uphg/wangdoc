<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>对象的继承 | WangDoc</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="stylesheet" href="/wangdoc/font/index.css">
    <meta name="description" content="Carried from Ruan Yifeng">
    
    <link rel="preload" href="/wangdoc/assets/css/0.styles.b8e2a6d5.css" as="style"><link rel="preload" href="/wangdoc/assets/js/app.8723d088.js" as="script"><link rel="preload" href="/wangdoc/assets/js/2.9a1a264e.js" as="script"><link rel="preload" href="/wangdoc/assets/js/195.ee0924e6.js" as="script"><link rel="preload" href="/wangdoc/assets/js/3.59361ec6.js" as="script"><link rel="prefetch" href="/wangdoc/assets/js/10.fffc7a41.js"><link rel="prefetch" href="/wangdoc/assets/js/100.3e59f891.js"><link rel="prefetch" href="/wangdoc/assets/js/101.ef65efb9.js"><link rel="prefetch" href="/wangdoc/assets/js/102.75a61923.js"><link rel="prefetch" href="/wangdoc/assets/js/103.950126da.js"><link rel="prefetch" href="/wangdoc/assets/js/104.0a3f6380.js"><link rel="prefetch" href="/wangdoc/assets/js/105.a8a2751c.js"><link rel="prefetch" href="/wangdoc/assets/js/106.0909bfd6.js"><link rel="prefetch" href="/wangdoc/assets/js/107.61dd327f.js"><link rel="prefetch" href="/wangdoc/assets/js/108.208d689b.js"><link rel="prefetch" href="/wangdoc/assets/js/109.3429b861.js"><link rel="prefetch" href="/wangdoc/assets/js/11.8e77b7fa.js"><link rel="prefetch" href="/wangdoc/assets/js/110.b17a98c3.js"><link rel="prefetch" href="/wangdoc/assets/js/111.67089df7.js"><link rel="prefetch" href="/wangdoc/assets/js/112.a61e4aac.js"><link rel="prefetch" href="/wangdoc/assets/js/113.8d129cc4.js"><link rel="prefetch" href="/wangdoc/assets/js/114.91202325.js"><link rel="prefetch" href="/wangdoc/assets/js/115.9232db7a.js"><link rel="prefetch" href="/wangdoc/assets/js/116.3f57f7fa.js"><link rel="prefetch" href="/wangdoc/assets/js/117.39fbb4a2.js"><link rel="prefetch" href="/wangdoc/assets/js/118.98fbb079.js"><link rel="prefetch" href="/wangdoc/assets/js/119.b802df94.js"><link rel="prefetch" href="/wangdoc/assets/js/12.5dfcc468.js"><link rel="prefetch" href="/wangdoc/assets/js/120.f2f3e969.js"><link rel="prefetch" href="/wangdoc/assets/js/121.ddc41600.js"><link rel="prefetch" href="/wangdoc/assets/js/122.1f9e6996.js"><link rel="prefetch" href="/wangdoc/assets/js/123.3dab5cb7.js"><link rel="prefetch" href="/wangdoc/assets/js/124.b5634c42.js"><link rel="prefetch" href="/wangdoc/assets/js/125.ba352811.js"><link rel="prefetch" href="/wangdoc/assets/js/126.98b393c9.js"><link rel="prefetch" href="/wangdoc/assets/js/127.b496b115.js"><link rel="prefetch" href="/wangdoc/assets/js/128.efd428c1.js"><link rel="prefetch" href="/wangdoc/assets/js/129.611df66b.js"><link rel="prefetch" href="/wangdoc/assets/js/13.a62f0816.js"><link rel="prefetch" href="/wangdoc/assets/js/130.4b7a2d82.js"><link rel="prefetch" href="/wangdoc/assets/js/131.bdc89fb1.js"><link rel="prefetch" href="/wangdoc/assets/js/132.81e9f548.js"><link rel="prefetch" href="/wangdoc/assets/js/133.5eb3b1b7.js"><link rel="prefetch" href="/wangdoc/assets/js/134.38475e6b.js"><link rel="prefetch" href="/wangdoc/assets/js/135.97431481.js"><link rel="prefetch" href="/wangdoc/assets/js/136.30b1e941.js"><link rel="prefetch" href="/wangdoc/assets/js/137.73813383.js"><link rel="prefetch" href="/wangdoc/assets/js/138.b01b5323.js"><link rel="prefetch" href="/wangdoc/assets/js/139.c1684e59.js"><link rel="prefetch" href="/wangdoc/assets/js/14.84f939d6.js"><link rel="prefetch" href="/wangdoc/assets/js/140.f4558659.js"><link rel="prefetch" href="/wangdoc/assets/js/141.1bc13a9c.js"><link rel="prefetch" href="/wangdoc/assets/js/142.055417da.js"><link rel="prefetch" href="/wangdoc/assets/js/143.e601ea78.js"><link rel="prefetch" href="/wangdoc/assets/js/144.1e73528e.js"><link rel="prefetch" href="/wangdoc/assets/js/145.6bf0a2fe.js"><link rel="prefetch" href="/wangdoc/assets/js/146.a1ae1ce8.js"><link rel="prefetch" href="/wangdoc/assets/js/147.b8be9cae.js"><link rel="prefetch" href="/wangdoc/assets/js/148.8cbf7229.js"><link rel="prefetch" href="/wangdoc/assets/js/149.01b6ab4a.js"><link rel="prefetch" href="/wangdoc/assets/js/15.82f0e11e.js"><link rel="prefetch" href="/wangdoc/assets/js/150.4c804003.js"><link rel="prefetch" href="/wangdoc/assets/js/151.d7e5eb85.js"><link rel="prefetch" href="/wangdoc/assets/js/152.14229211.js"><link rel="prefetch" href="/wangdoc/assets/js/153.0d37926e.js"><link rel="prefetch" href="/wangdoc/assets/js/154.8bcfe02c.js"><link rel="prefetch" href="/wangdoc/assets/js/155.527ee7a3.js"><link rel="prefetch" href="/wangdoc/assets/js/156.38bc424c.js"><link rel="prefetch" href="/wangdoc/assets/js/157.3e0373c8.js"><link rel="prefetch" href="/wangdoc/assets/js/158.fc8b752f.js"><link rel="prefetch" href="/wangdoc/assets/js/159.c93507b3.js"><link rel="prefetch" href="/wangdoc/assets/js/16.5f5758fa.js"><link rel="prefetch" href="/wangdoc/assets/js/160.c4b534f5.js"><link rel="prefetch" href="/wangdoc/assets/js/161.06c90281.js"><link rel="prefetch" href="/wangdoc/assets/js/162.bd0061bc.js"><link rel="prefetch" href="/wangdoc/assets/js/163.7dc573cc.js"><link rel="prefetch" href="/wangdoc/assets/js/164.46c37e7e.js"><link rel="prefetch" href="/wangdoc/assets/js/165.8c3320bc.js"><link rel="prefetch" href="/wangdoc/assets/js/166.52bd3222.js"><link rel="prefetch" href="/wangdoc/assets/js/167.dbb3c808.js"><link rel="prefetch" href="/wangdoc/assets/js/168.e63c4c28.js"><link rel="prefetch" href="/wangdoc/assets/js/169.2a437e05.js"><link rel="prefetch" href="/wangdoc/assets/js/17.053fde3c.js"><link rel="prefetch" href="/wangdoc/assets/js/170.b7f98abe.js"><link rel="prefetch" href="/wangdoc/assets/js/171.b3b224c7.js"><link rel="prefetch" href="/wangdoc/assets/js/172.080f2b03.js"><link rel="prefetch" href="/wangdoc/assets/js/173.87af14bd.js"><link rel="prefetch" href="/wangdoc/assets/js/174.b91695a3.js"><link rel="prefetch" href="/wangdoc/assets/js/175.9db61895.js"><link rel="prefetch" href="/wangdoc/assets/js/176.026ab96b.js"><link rel="prefetch" href="/wangdoc/assets/js/177.7990a06a.js"><link rel="prefetch" href="/wangdoc/assets/js/178.374813d2.js"><link rel="prefetch" href="/wangdoc/assets/js/179.f35e9bb6.js"><link rel="prefetch" href="/wangdoc/assets/js/18.4f711126.js"><link rel="prefetch" href="/wangdoc/assets/js/180.c16c6d3b.js"><link rel="prefetch" href="/wangdoc/assets/js/181.3a5462f6.js"><link rel="prefetch" href="/wangdoc/assets/js/182.26ff6d1c.js"><link rel="prefetch" href="/wangdoc/assets/js/183.8c47c990.js"><link rel="prefetch" href="/wangdoc/assets/js/184.71fbdaa4.js"><link rel="prefetch" href="/wangdoc/assets/js/185.e0399587.js"><link rel="prefetch" href="/wangdoc/assets/js/186.b4744693.js"><link rel="prefetch" href="/wangdoc/assets/js/187.8c1edd7c.js"><link rel="prefetch" href="/wangdoc/assets/js/188.3de1c37e.js"><link rel="prefetch" href="/wangdoc/assets/js/189.d946e11d.js"><link rel="prefetch" href="/wangdoc/assets/js/19.f34b619c.js"><link rel="prefetch" href="/wangdoc/assets/js/190.612f181f.js"><link rel="prefetch" href="/wangdoc/assets/js/191.a81ba58e.js"><link rel="prefetch" href="/wangdoc/assets/js/192.42db791a.js"><link rel="prefetch" href="/wangdoc/assets/js/193.4ec3f969.js"><link rel="prefetch" href="/wangdoc/assets/js/194.fd924de9.js"><link rel="prefetch" href="/wangdoc/assets/js/196.5dbb1d15.js"><link rel="prefetch" href="/wangdoc/assets/js/197.701e76ac.js"><link rel="prefetch" href="/wangdoc/assets/js/198.99352439.js"><link rel="prefetch" href="/wangdoc/assets/js/199.18de1981.js"><link rel="prefetch" href="/wangdoc/assets/js/20.63fcdeab.js"><link rel="prefetch" href="/wangdoc/assets/js/200.473e83b9.js"><link rel="prefetch" href="/wangdoc/assets/js/201.0876610e.js"><link rel="prefetch" href="/wangdoc/assets/js/202.850bec6f.js"><link rel="prefetch" href="/wangdoc/assets/js/203.5c6a0391.js"><link rel="prefetch" href="/wangdoc/assets/js/204.f6e98d0c.js"><link rel="prefetch" href="/wangdoc/assets/js/205.85a84dce.js"><link rel="prefetch" href="/wangdoc/assets/js/206.73f9ea55.js"><link rel="prefetch" href="/wangdoc/assets/js/207.877457e9.js"><link rel="prefetch" href="/wangdoc/assets/js/208.4ab305de.js"><link rel="prefetch" href="/wangdoc/assets/js/209.f631d42b.js"><link rel="prefetch" href="/wangdoc/assets/js/21.53646bd4.js"><link rel="prefetch" href="/wangdoc/assets/js/210.54866ad8.js"><link rel="prefetch" href="/wangdoc/assets/js/211.8a2461ad.js"><link rel="prefetch" href="/wangdoc/assets/js/212.1a1631ff.js"><link rel="prefetch" href="/wangdoc/assets/js/213.65a08201.js"><link rel="prefetch" href="/wangdoc/assets/js/214.e091799f.js"><link rel="prefetch" href="/wangdoc/assets/js/215.3f088f25.js"><link rel="prefetch" href="/wangdoc/assets/js/216.525ce2e2.js"><link rel="prefetch" href="/wangdoc/assets/js/217.66d821a3.js"><link rel="prefetch" href="/wangdoc/assets/js/218.1a79eb73.js"><link rel="prefetch" href="/wangdoc/assets/js/219.6268047b.js"><link rel="prefetch" href="/wangdoc/assets/js/22.36428159.js"><link rel="prefetch" href="/wangdoc/assets/js/220.9c6338ad.js"><link rel="prefetch" href="/wangdoc/assets/js/221.02146d93.js"><link rel="prefetch" href="/wangdoc/assets/js/222.eea3bd30.js"><link rel="prefetch" href="/wangdoc/assets/js/223.552d4a26.js"><link rel="prefetch" href="/wangdoc/assets/js/224.175eebf2.js"><link rel="prefetch" href="/wangdoc/assets/js/225.408dcf42.js"><link rel="prefetch" href="/wangdoc/assets/js/226.5ba00006.js"><link rel="prefetch" href="/wangdoc/assets/js/227.b7671369.js"><link rel="prefetch" href="/wangdoc/assets/js/228.3522be14.js"><link rel="prefetch" href="/wangdoc/assets/js/229.812add83.js"><link rel="prefetch" href="/wangdoc/assets/js/23.e250d2fd.js"><link rel="prefetch" href="/wangdoc/assets/js/230.9e4314dc.js"><link rel="prefetch" href="/wangdoc/assets/js/231.3a4fa902.js"><link rel="prefetch" href="/wangdoc/assets/js/232.6939ad2d.js"><link rel="prefetch" href="/wangdoc/assets/js/233.ea0f4da8.js"><link rel="prefetch" href="/wangdoc/assets/js/234.84583de3.js"><link rel="prefetch" href="/wangdoc/assets/js/235.122a476b.js"><link rel="prefetch" href="/wangdoc/assets/js/236.3f4dd591.js"><link rel="prefetch" href="/wangdoc/assets/js/237.9e8d960a.js"><link rel="prefetch" href="/wangdoc/assets/js/238.44e1491a.js"><link rel="prefetch" href="/wangdoc/assets/js/239.34e411dc.js"><link rel="prefetch" href="/wangdoc/assets/js/24.f736c744.js"><link rel="prefetch" href="/wangdoc/assets/js/240.02a03faa.js"><link rel="prefetch" href="/wangdoc/assets/js/241.892ea6ad.js"><link rel="prefetch" href="/wangdoc/assets/js/242.2727cbba.js"><link rel="prefetch" href="/wangdoc/assets/js/243.3a66a03c.js"><link rel="prefetch" href="/wangdoc/assets/js/244.87fe4877.js"><link rel="prefetch" href="/wangdoc/assets/js/245.7c8a2445.js"><link rel="prefetch" href="/wangdoc/assets/js/246.560997d4.js"><link rel="prefetch" href="/wangdoc/assets/js/247.59d98ae4.js"><link rel="prefetch" href="/wangdoc/assets/js/248.d1ccbc48.js"><link rel="prefetch" href="/wangdoc/assets/js/249.03d46d71.js"><link rel="prefetch" href="/wangdoc/assets/js/25.f48ff59a.js"><link rel="prefetch" href="/wangdoc/assets/js/250.6efa8244.js"><link rel="prefetch" href="/wangdoc/assets/js/251.0026c87f.js"><link rel="prefetch" href="/wangdoc/assets/js/26.40d3655b.js"><link rel="prefetch" href="/wangdoc/assets/js/27.38a65ddc.js"><link rel="prefetch" href="/wangdoc/assets/js/28.8b75da0a.js"><link rel="prefetch" href="/wangdoc/assets/js/29.f13fc723.js"><link rel="prefetch" href="/wangdoc/assets/js/30.315594cc.js"><link rel="prefetch" href="/wangdoc/assets/js/31.a3449021.js"><link rel="prefetch" href="/wangdoc/assets/js/32.948ef6d8.js"><link rel="prefetch" href="/wangdoc/assets/js/33.153aea70.js"><link rel="prefetch" href="/wangdoc/assets/js/34.f2788372.js"><link rel="prefetch" href="/wangdoc/assets/js/35.22e4ae1a.js"><link rel="prefetch" href="/wangdoc/assets/js/36.f48064c8.js"><link rel="prefetch" href="/wangdoc/assets/js/37.3773d5a0.js"><link rel="prefetch" href="/wangdoc/assets/js/38.93705a9c.js"><link rel="prefetch" href="/wangdoc/assets/js/39.2afce206.js"><link rel="prefetch" href="/wangdoc/assets/js/4.4b75fed9.js"><link rel="prefetch" href="/wangdoc/assets/js/40.51df798f.js"><link rel="prefetch" href="/wangdoc/assets/js/41.95d176c1.js"><link rel="prefetch" href="/wangdoc/assets/js/42.5272f207.js"><link rel="prefetch" href="/wangdoc/assets/js/43.34f2e9f3.js"><link rel="prefetch" href="/wangdoc/assets/js/44.1f785bbb.js"><link rel="prefetch" href="/wangdoc/assets/js/45.0102682b.js"><link rel="prefetch" href="/wangdoc/assets/js/46.f52a47d9.js"><link rel="prefetch" href="/wangdoc/assets/js/47.6a133660.js"><link rel="prefetch" href="/wangdoc/assets/js/48.04d685e6.js"><link rel="prefetch" href="/wangdoc/assets/js/49.2733ea4d.js"><link rel="prefetch" href="/wangdoc/assets/js/5.9bd83369.js"><link rel="prefetch" href="/wangdoc/assets/js/50.51c74ba3.js"><link rel="prefetch" href="/wangdoc/assets/js/51.a92da126.js"><link rel="prefetch" href="/wangdoc/assets/js/52.1cf0402d.js"><link rel="prefetch" href="/wangdoc/assets/js/53.c2c2b1fa.js"><link rel="prefetch" href="/wangdoc/assets/js/54.6feeeb84.js"><link rel="prefetch" href="/wangdoc/assets/js/55.808d2125.js"><link rel="prefetch" href="/wangdoc/assets/js/56.deaa66cb.js"><link rel="prefetch" href="/wangdoc/assets/js/57.b5db8ee3.js"><link rel="prefetch" href="/wangdoc/assets/js/58.f719c564.js"><link rel="prefetch" href="/wangdoc/assets/js/59.f679c996.js"><link rel="prefetch" href="/wangdoc/assets/js/6.e73d1c0a.js"><link rel="prefetch" href="/wangdoc/assets/js/60.01882b8f.js"><link rel="prefetch" href="/wangdoc/assets/js/61.024fa35f.js"><link rel="prefetch" href="/wangdoc/assets/js/62.cc7e8280.js"><link rel="prefetch" href="/wangdoc/assets/js/63.75459a91.js"><link rel="prefetch" href="/wangdoc/assets/js/64.2d330a94.js"><link rel="prefetch" href="/wangdoc/assets/js/65.5505951d.js"><link rel="prefetch" href="/wangdoc/assets/js/66.01178aa8.js"><link rel="prefetch" href="/wangdoc/assets/js/67.db24a774.js"><link rel="prefetch" href="/wangdoc/assets/js/68.f463daf1.js"><link rel="prefetch" href="/wangdoc/assets/js/69.9006ec12.js"><link rel="prefetch" href="/wangdoc/assets/js/7.1cf9234b.js"><link rel="prefetch" href="/wangdoc/assets/js/70.e3e09ec2.js"><link rel="prefetch" href="/wangdoc/assets/js/71.6fd94d1d.js"><link rel="prefetch" href="/wangdoc/assets/js/72.47af9285.js"><link rel="prefetch" href="/wangdoc/assets/js/73.8616a5b7.js"><link rel="prefetch" href="/wangdoc/assets/js/74.14894b42.js"><link rel="prefetch" href="/wangdoc/assets/js/75.d341ec20.js"><link rel="prefetch" href="/wangdoc/assets/js/76.4ffc32bc.js"><link rel="prefetch" href="/wangdoc/assets/js/77.aff4cbd1.js"><link rel="prefetch" href="/wangdoc/assets/js/78.ec37d73f.js"><link rel="prefetch" href="/wangdoc/assets/js/79.07fc5bb3.js"><link rel="prefetch" href="/wangdoc/assets/js/8.329baaa5.js"><link rel="prefetch" href="/wangdoc/assets/js/80.14824d90.js"><link rel="prefetch" href="/wangdoc/assets/js/81.76626d4f.js"><link rel="prefetch" href="/wangdoc/assets/js/82.9d73e231.js"><link rel="prefetch" href="/wangdoc/assets/js/83.c3bdcee0.js"><link rel="prefetch" href="/wangdoc/assets/js/84.ac8a7e3b.js"><link rel="prefetch" href="/wangdoc/assets/js/85.0d32b3d5.js"><link rel="prefetch" href="/wangdoc/assets/js/86.8aeb89ff.js"><link rel="prefetch" href="/wangdoc/assets/js/87.fd64aa61.js"><link rel="prefetch" href="/wangdoc/assets/js/88.9da6635a.js"><link rel="prefetch" href="/wangdoc/assets/js/89.e966656e.js"><link rel="prefetch" href="/wangdoc/assets/js/9.8f332061.js"><link rel="prefetch" href="/wangdoc/assets/js/90.70c4ec59.js"><link rel="prefetch" href="/wangdoc/assets/js/91.a334b611.js"><link rel="prefetch" href="/wangdoc/assets/js/92.9214298e.js"><link rel="prefetch" href="/wangdoc/assets/js/93.68cedc81.js"><link rel="prefetch" href="/wangdoc/assets/js/94.572f645a.js"><link rel="prefetch" href="/wangdoc/assets/js/95.fdaacb9c.js"><link rel="prefetch" href="/wangdoc/assets/js/96.4a04f1b6.js"><link rel="prefetch" href="/wangdoc/assets/js/97.5e22edd4.js"><link rel="prefetch" href="/wangdoc/assets/js/98.18154198.js"><link rel="prefetch" href="/wangdoc/assets/js/99.9c3f7eff.js">
    <link rel="stylesheet" href="/wangdoc/assets/css/0.styles.b8e2a6d5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="tulp-scrollbar"><div class="scrollbar-wrapper tulp-scrollbar__wrap tulp-scrollbar__wrap--hidden-default"><div class="tulp-scrollbar__view"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/wangdoc/" class="home-link router-link-active"><!----> <span class="site-name">WangDoc</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----> <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="icon search-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M18.319 14.4326C20.7628 11.2941 20.542 6.75347 17.6569 3.86829C14.5327 0.744098 9.46734 0.744098 6.34315 3.86829C3.21895 6.99249 3.21895 12.0578 6.34315 15.182C9.22833 18.0672 13.769 18.2879 16.9075 15.8442C16.921 15.8595 16.9351 15.8745 16.9497 15.8891L21.1924 20.1317C21.5829 20.5223 22.2161 20.5223 22.6066 20.1317C22.9971 19.7412 22.9971 19.1081 22.6066 18.7175L18.364 14.4749C18.3493 14.4603 18.3343 14.4462 18.319 14.4326ZM16.2426 5.28251C18.5858 7.62565 18.5858 11.4246 16.2426 13.7678C13.8995 16.1109 10.1005 16.1109 7.75736 13.7678C5.41421 11.4246 5.41421 7.62565 7.75736 5.28251C10.1005 2.93936 13.8995 2.93936 16.2426 5.28251Z"></path></svg></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/wangdoc/html/" class="nav-link">
  HTML 教程
</a></div><div class="nav-item"><a href="/wangdoc/js/" class="nav-link router-link-active">
  JavaScript 教程
</a></div><div class="nav-item"><a href="/wangdoc/es6/" class="nav-link">
  ES6 教程
</a></div><div class="nav-item"><a href="/wangdoc/webapi/" class="nav-link">
  Web API 教程
</a></div><div class="nav-item"><a href="/wangdoc/bash/" class="nav-link">
  Bash 脚本教程
</a></div><div class="nav-item"><a href="/wangdoc/ssh/" class="nav-link">
  SSH 教程
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="相关链接" class="dropdown-title"><span class="title">相关链接</span> <span class="arrow down"></span></button> <button type="button" aria-label="相关链接" class="mobile-dropdown-title"><span class="title">相关链接</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/uphg/wangdoc" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://wangdoc.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  网道
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><div class="tulp-scrollbar"><div class="scrollbar-wrapper tulp-scrollbar__wrap tulp-scrollbar__wrap--hidden-default"><div class="tulp-scrollbar__view"><nav class="nav-links"><div class="nav-item"><a href="/wangdoc/html/" class="nav-link">
  HTML 教程
</a></div><div class="nav-item"><a href="/wangdoc/js/" class="nav-link router-link-active">
  JavaScript 教程
</a></div><div class="nav-item"><a href="/wangdoc/es6/" class="nav-link">
  ES6 教程
</a></div><div class="nav-item"><a href="/wangdoc/webapi/" class="nav-link">
  Web API 教程
</a></div><div class="nav-item"><a href="/wangdoc/bash/" class="nav-link">
  Bash 脚本教程
</a></div><div class="nav-item"><a href="/wangdoc/ssh/" class="nav-link">
  SSH 教程
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="相关链接" class="dropdown-title"><span class="title">相关链接</span> <span class="arrow down"></span></button> <button type="button" aria-label="相关链接" class="mobile-dropdown-title"><span class="title">相关链接</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/uphg/wangdoc" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://wangdoc.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  网道
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript 教程</span> <svg aria-hidden="true" id="icon-arrow-right" viewBox="0 0 1024 1024" class="sidebar-icon arrow-right"><path d="M797.21457646 444.0233542C639.18078066 323.41640029 481.14698487 202.80944727 323.13223847 82.18344394 266.85068662 39.24639688 185.76131065 79.36563623 185.76131065 150.16009062v723.67823145c0 70.7944544 81.08937597 110.91528018 137.37092782 67.95918369 158.01474638-120.60854033 316.04854219-241.21390605 474.08233799-361.83832207 44.83410644-34.21851065 44.83410644-101.69985674 0-135.93582949z"></path></svg></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>入门篇</span> <svg aria-hidden="true" id="icon-arrow-right" viewBox="0 0 1024 1024" class="sidebar-icon arrow-right"><path d="M797.21457646 444.0233542C639.18078066 323.41640029 481.14698487 202.80944727 323.13223847 82.18344394 266.85068662 39.24639688 185.76131065 79.36563623 185.76131065 150.16009062v723.67823145c0 70.7944544 81.08937597 110.91528018 137.37092782 67.95918369 158.01474638-120.60854033 316.04854219-241.21390605 474.08233799-361.83832207 44.83410644-34.21851065 44.83410644-101.69985674 0-135.93582949z"></path></svg></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据类型</span> <svg aria-hidden="true" id="icon-arrow-right" viewBox="0 0 1024 1024" class="sidebar-icon arrow-right"><path d="M797.21457646 444.0233542C639.18078066 323.41640029 481.14698487 202.80944727 323.13223847 82.18344394 266.85068662 39.24639688 185.76131065 79.36563623 185.76131065 150.16009062v723.67823145c0 70.7944544 81.08937597 110.91528018 137.37092782 67.95918369 158.01474638-120.60854033 316.04854219-241.21390605 474.08233799-361.83832207 44.83410644-34.21851065 44.83410644-101.69985674 0-135.93582949z"></path></svg></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>运算符</span> <svg aria-hidden="true" id="icon-arrow-right" viewBox="0 0 1024 1024" class="sidebar-icon arrow-right"><path d="M797.21457646 444.0233542C639.18078066 323.41640029 481.14698487 202.80944727 323.13223847 82.18344394 266.85068662 39.24639688 185.76131065 79.36563623 185.76131065 150.16009062v723.67823145c0 70.7944544 81.08937597 110.91528018 137.37092782 67.95918369 158.01474638-120.60854033 316.04854219-241.21390605 474.08233799-361.83832207 44.83410644-34.21851065 44.83410644-101.69985674 0-135.93582949z"></path></svg></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>语法专题</span> <svg aria-hidden="true" id="icon-arrow-right" viewBox="0 0 1024 1024" class="sidebar-icon arrow-right"><path d="M797.21457646 444.0233542C639.18078066 323.41640029 481.14698487 202.80944727 323.13223847 82.18344394 266.85068662 39.24639688 185.76131065 79.36563623 185.76131065 150.16009062v723.67823145c0 70.7944544 81.08937597 110.91528018 137.37092782 67.95918369 158.01474638-120.60854033 316.04854219-241.21390605 474.08233799-361.83832207 44.83410644-34.21851065 44.83410644-101.69985674 0-135.93582949z"></path></svg></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>标准库</span> <svg aria-hidden="true" id="icon-arrow-right" viewBox="0 0 1024 1024" class="sidebar-icon arrow-right"><path d="M797.21457646 444.0233542C639.18078066 323.41640029 481.14698487 202.80944727 323.13223847 82.18344394 266.85068662 39.24639688 185.76131065 79.36563623 185.76131065 150.16009062v723.67823145c0 70.7944544 81.08937597 110.91528018 137.37092782 67.95918369 158.01474638-120.60854033 316.04854219-241.21390605 474.08233799-361.83832207 44.83410644-34.21851065 44.83410644-101.69985674 0-135.93582949z"></path></svg></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>面向对象编程</span> <svg aria-hidden="true" id="icon-arrow-right" viewBox="0 0 1024 1024" class="sidebar-icon arrow-right is-down"><path d="M797.21457646 444.0233542C639.18078066 323.41640029 481.14698487 202.80944727 323.13223847 82.18344394 266.85068662 39.24639688 185.76131065 79.36563623 185.76131065 150.16009062v723.67823145c0 70.7944544 81.08937597 110.91528018 137.37092782 67.95918369 158.01474638-120.60854033 316.04854219-241.21390605 474.08233799-361.83832207 44.83410644-34.21851065 44.83410644-101.69985674 0-135.93582949z"></path></svg></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wangdoc/js/oop/new.html" class="sidebar-link">实例对象与 new 命令</a></li><li><a href="/wangdoc/js/oop/this.html" class="sidebar-link">this 关键字</a></li><li><a href="/wangdoc/js/oop/prototype.html" aria-current="page" class="active sidebar-link">对象的继承</a></li><li><a href="/wangdoc/js/oop/object.html" class="sidebar-link">Object 对象的相关方法</a></li><li><a href="/wangdoc/js/oop/strict.html" class="sidebar-link">严格模式</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>异步操作</span> <svg aria-hidden="true" id="icon-arrow-right" viewBox="0 0 1024 1024" class="sidebar-icon arrow-right"><path d="M797.21457646 444.0233542C639.18078066 323.41640029 481.14698487 202.80944727 323.13223847 82.18344394 266.85068662 39.24639688 185.76131065 79.36563623 185.76131065 150.16009062v723.67823145c0 70.7944544 81.08937597 110.91528018 137.37092782 67.95918369 158.01474638-120.60854033 316.04854219-241.21390605 474.08233799-361.83832207 44.83410644-34.21851065 44.83410644-101.69985674 0-135.93582949z"></path></svg></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>DOM</span> <svg aria-hidden="true" id="icon-arrow-right" viewBox="0 0 1024 1024" class="sidebar-icon arrow-right"><path d="M797.21457646 444.0233542C639.18078066 323.41640029 481.14698487 202.80944727 323.13223847 82.18344394 266.85068662 39.24639688 185.76131065 79.36563623 185.76131065 150.16009062v723.67823145c0 70.7944544 81.08937597 110.91528018 137.37092782 67.95918369 158.01474638-120.60854033 316.04854219-241.21390605 474.08233799-361.83832207 44.83410644-34.21851065 44.83410644-101.69985674 0-135.93582949z"></path></svg></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>事件</span> <svg aria-hidden="true" id="icon-arrow-right" viewBox="0 0 1024 1024" class="sidebar-icon arrow-right"><path d="M797.21457646 444.0233542C639.18078066 323.41640029 481.14698487 202.80944727 323.13223847 82.18344394 266.85068662 39.24639688 185.76131065 79.36563623 185.76131065 150.16009062v723.67823145c0 70.7944544 81.08937597 110.91528018 137.37092782 67.95918369 158.01474638-120.60854033 316.04854219-241.21390605 474.08233799-361.83832207 44.83410644-34.21851065 44.83410644-101.69985674 0-135.93582949z"></path></svg></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>浏览器模型</span> <svg aria-hidden="true" id="icon-arrow-right" viewBox="0 0 1024 1024" class="sidebar-icon arrow-right"><path d="M797.21457646 444.0233542C639.18078066 323.41640029 481.14698487 202.80944727 323.13223847 82.18344394 266.85068662 39.24639688 185.76131065 79.36563623 185.76131065 150.16009062v723.67823145c0 70.7944544 81.08937597 110.91528018 137.37092782 67.95918369 158.01474638-120.60854033 316.04854219-241.21390605 474.08233799-361.83832207 44.83410644-34.21851065 44.83410644-101.69985674 0-135.93582949z"></path></svg></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>附录：网页元素接口</span> <svg aria-hidden="true" id="icon-arrow-right" viewBox="0 0 1024 1024" class="sidebar-icon arrow-right"><path d="M797.21457646 444.0233542C639.18078066 323.41640029 481.14698487 202.80944727 323.13223847 82.18344394 266.85068662 39.24639688 185.76131065 79.36563623 185.76131065 150.16009062v723.67823145c0 70.7944544 81.08937597 110.91528018 137.37092782 67.95918369 158.01474638-120.60854033 316.04854219-241.21390605 474.08233799-361.83832207 44.83410644-34.21851065 44.83410644-101.69985674 0-135.93582949z"></path></svg></p> <!----></section></li></ul> </div></div><div class="tulp-scrollbar__bar is-horizontal"><div class="tulp-scrollbar__thumb" style="width:0;transform:translateX(0%);ms-transform:translateX(0%);webkit-transform:translateX(0%);"></div></div><div class="tulp-scrollbar__bar is-vertical"><div class="tulp-scrollbar__thumb" style="height:0;transform:translateY(0%);ms-transform:translateY(0%);webkit-transform:translateY(0%);"></div></div></div></aside> <main class="page"> <div class="re-page-top"><h2 class="title"><span>对象的继承</span></h2></div> <div class="page-index"><div class="page-index-title"><span class="open-catalog"><svg aria-hidden="true" id="icon-arrow-right" viewBox="0 0 1024 1024" class="page-index-icon arrow-right"><path d="M797.21457646 444.0233542C639.18078066 323.41640029 481.14698487 202.80944727 323.13223847 82.18344394 266.85068662 39.24639688 185.76131065 79.36563623 185.76131065 150.16009062v723.67823145c0 70.7944544 81.08937597 110.91528018 137.37092782 67.95918369 158.01474638-120.60854033 316.04854219-241.21390605 474.08233799-361.83832207 44.83410644-34.21851065 44.83410644-101.69985674 0-135.93582949z"></path></svg> <span class="text">目录</span></span></div> <div class="page-index-content"><div class="page-catalog" style="display:none;"><div class="synopsis-wrap"><ul class="synopsis-ul"><li class="synopsis-li"><a href="/wangdoc/js/oop/prototype.html#原型对象概述" class="synopsis-link">原型对象概述</a><ul class="synopsis-ul"><li class="synopsis-li"><a href="/wangdoc/js/oop/prototype.html#构造函数的缺点" class="synopsis-link">构造函数的缺点</a></li><li class="synopsis-li"><a href="/wangdoc/js/oop/prototype.html#prototype-属性的作用" class="synopsis-link">prototype 属性的作用</a></li><li class="synopsis-li"><a href="/wangdoc/js/oop/prototype.html#原型链" class="synopsis-link">原型链</a></li><li class="synopsis-li"><a href="/wangdoc/js/oop/prototype.html#constructor-属性" class="synopsis-link">constructor 属性</a></li></ul></li><li class="synopsis-li"><a href="/wangdoc/js/oop/prototype.html#instanceof-运算符" class="synopsis-link">instanceof 运算符</a></li><li class="synopsis-li"><a href="/wangdoc/js/oop/prototype.html#构造函数的继承" class="synopsis-link">构造函数的继承</a></li><li class="synopsis-li"><a href="/wangdoc/js/oop/prototype.html#多重继承" class="synopsis-link">多重继承</a></li><li class="synopsis-li"><a href="/wangdoc/js/oop/prototype.html#模块" class="synopsis-link">模块</a><ul class="synopsis-ul"><li class="synopsis-li"><a href="/wangdoc/js/oop/prototype.html#基本的实现方法" class="synopsis-link">基本的实现方法</a></li><li class="synopsis-li"><a href="/wangdoc/js/oop/prototype.html#封装私有变量-构造函数的写法" class="synopsis-link">封装私有变量：构造函数的写法</a></li><li class="synopsis-li"><a href="/wangdoc/js/oop/prototype.html#封装私有变量-立即执行函数的写法" class="synopsis-link">封装私有变量：立即执行函数的写法</a></li><li class="synopsis-li"><a href="/wangdoc/js/oop/prototype.html#模块的放大模式" class="synopsis-link">模块的放大模式</a></li><li class="synopsis-li"><a href="/wangdoc/js/oop/prototype.html#输入全局变量" class="synopsis-link">输入全局变量</a></li></ul></li><li class="synopsis-li"><a href="/wangdoc/js/oop/prototype.html#参考链接" class="synopsis-link">参考链接</a></li></ul></div></div></div></div> <div class="theme-default-content content__default"><h1 id="对象的继承"><a href="#对象的继承" class="header-anchor">#</a> 对象的继承</h1> <p>面向对象编程很重要的一个方面，就是对象的继承。A 对象通过继承 B 对象，就能直接拥有 B 对象的所有属性和方法。这对于代码的复用是非常有用的。</p> <p>大部分面向对象的编程语言，都是通过“类”（class）实现对象的继承。传统上，JavaScript 语言的继承不通过 class，而是通过“原型对象”（prototype）实现，本章介绍 JavaScript 的原型链继承。</p> <p>ES6 引入了 class 语法，基于 class 的继承不在这个教程介绍，请参阅《ES6 标准入门》一书的相关章节。</p> <h2 id="原型对象概述"><a href="#原型对象概述" class="header-anchor">#</a> 原型对象概述</h2> <h3 id="构造函数的缺点"><a href="#构造函数的缺点" class="header-anchor">#</a> 构造函数的缺点</h3> <p>JavaScript 通过构造函数生成新对象，因此构造函数可以视为对象的模板。实例对象的属性和方法，可以定义在构造函数内部。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Cat</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> color</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> color<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> cat1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token string">'大毛'</span><span class="token punctuation">,</span> <span class="token string">'白色'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

cat1<span class="token punctuation">.</span>name <span class="token comment">// '大毛'</span>
cat1<span class="token punctuation">.</span>color <span class="token comment">// '白色'</span>
</code></pre></div><p>上面代码中，<code>Cat</code>函数是一个构造函数，函数内部定义了<code>name</code>属性和<code>color</code>属性，所有实例对象（上例是<code>cat1</code>）都会生成这两个属性，即这两个属性会定义在实例对象上面。</p> <p>通过构造函数为实例对象定义属性，虽然很方便，但是有一个缺点。同一个构造函数的多个实例之间，无法共享属性，从而造成对系统资源的浪费。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Cat</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> color</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> color<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">meow</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'喵喵'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> cat1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token string">'大毛'</span><span class="token punctuation">,</span> <span class="token string">'白色'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> cat2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token string">'二毛'</span><span class="token punctuation">,</span> <span class="token string">'黑色'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

cat1<span class="token punctuation">.</span>meow <span class="token operator">===</span> cat2<span class="token punctuation">.</span>meow
<span class="token comment">// false</span>
</code></pre></div><p>上面代码中，<code>cat1</code>和<code>cat2</code>是同一个构造函数的两个实例，它们都具有<code>meow</code>方法。由于<code>meow</code>方法是生成在每个实例对象上面，所以两个实例就生成了两次。也就是说，每新建一个实例，就会新建一个<code>meow</code>方法。这既没有必要，又浪费系统资源，因为所有<code>meow</code>方法都是同样的行为，完全应该共享。</p> <p>这个问题的解决方法，就是 JavaScript 的原型对象（prototype）。</p> <h3 id="prototype-属性的作用"><a href="#prototype-属性的作用" class="header-anchor">#</a> prototype 属性的作用</h3> <p>JavaScript 继承机制的设计思想就是，原型对象的所有属性和方法，都能被实例对象共享。也就是说，如果属性和方法定义在原型上，那么所有实例对象就能共享，不仅节省了内存，还体现了实例对象之间的联系。</p> <p>下面，先看怎么为对象指定原型。JavaScript 规定，每个函数都有一个<code>prototype</code>属性，指向一个对象。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">typeof</span> f<span class="token punctuation">.</span>prototype <span class="token comment">// &quot;object&quot;</span>
</code></pre></div><p>上面代码中，函数<code>f</code>默认具有<code>prototype</code>属性，指向一个对象。</p> <p>对于普通函数来说，该属性基本无用。但是，对于构造函数来说，生成实例的时候，该属性会自动成为实例对象的原型。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Animal</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">'white'</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> cat1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token string">'大毛'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> cat2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token string">'二毛'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

cat1<span class="token punctuation">.</span>color <span class="token comment">// 'white'</span>
cat2<span class="token punctuation">.</span>color <span class="token comment">// 'white'</span>
</code></pre></div><p>上面代码中，构造函数<code>Animal</code>的<code>prototype</code>属性，就是实例对象<code>cat1</code>和<code>cat2</code>的原型对象。原型对象上添加一个<code>color</code>属性，结果，实例对象都共享了该属性。</p> <p>原型对象的属性不是实例对象自身的属性。只要修改原型对象，变动就立刻会体现在<strong>所有</strong>实例对象上。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">'yellow'</span><span class="token punctuation">;</span>

cat1<span class="token punctuation">.</span>color <span class="token comment">// &quot;yellow&quot;</span>
cat2<span class="token punctuation">.</span>color <span class="token comment">// &quot;yellow&quot;</span>
</code></pre></div><p>上面代码中，原型对象的<code>color</code>属性的值变为<code>yellow</code>，两个实例对象的<code>color</code>属性立刻跟着变了。这是因为实例对象其实没有<code>color</code>属性，都是读取原型对象的<code>color</code>属性。也就是说，当实例对象本身没有某个属性或方法的时候，它会到原型对象去寻找该属性或方法。这就是原型对象的特殊之处。</p> <p>如果实例对象自身就有某个属性或方法，它就不会再去原型对象寻找这个属性或方法。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>cat1<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">'black'</span><span class="token punctuation">;</span>

cat1<span class="token punctuation">.</span>color <span class="token comment">// 'black'</span>
cat2<span class="token punctuation">.</span>color <span class="token comment">// 'yellow'</span>
<span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>color <span class="token comment">// 'yellow';</span>
</code></pre></div><p>上面代码中，实例对象<code>cat1</code>的<code>color</code>属性改为<code>black</code>，就使得它不再去原型对象读取<code>color</code>属性，后者的值依然为<code>yellow</code>。</p> <p>总结一下，原型对象的作用，就是定义所有实例对象共享的属性和方法。这也是它被称为原型对象的原因，而实例对象可以视作从原型对象衍生出来的子对象。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">walk</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">' is walking'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>上面代码中，<code>Animal.prototype</code>对象上面定义了一个<code>walk</code>方法，这个方法将可以在所有<code>Animal</code>实例对象上面调用。</p> <h3 id="原型链"><a href="#原型链" class="header-anchor">#</a> 原型链</h3> <p>JavaScript 规定，所有对象都有自己的原型对象（prototype）。一方面，任何一个对象，都可以充当其他对象的原型；另一方面，由于原型对象也是对象，所以它也有自己的原型。因此，就会形成一个“原型链”（prototype chain）：对象到原型，再到原型的原型……</p> <p>如果一层层地上溯，所有对象的原型最终都可以上溯到<code>Object.prototype</code>，即<code>Object</code>构造函数的<code>prototype</code>属性。也就是说，所有对象都继承了<code>Object.prototype</code>的属性。这就是所有对象都有<code>valueOf</code>和<code>toString</code>方法的原因，因为这是从<code>Object.prototype</code>继承的。</p> <p>那么，<code>Object.prototype</code>对象有没有它的原型呢？回答是<code>Object.prototype</code>的原型是<code>null</code>。<code>null</code>没有任何属性和方法，也没有自己的原型。因此，原型链的尽头就是<code>null</code>。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
<span class="token comment">// null</span>
</code></pre></div><p>上面代码表示，<code>Object.prototype</code>对象的原型是<code>null</code>，由于<code>null</code>没有任何属性，所以原型链到此为止。<code>Object.getPrototypeOf</code>方法返回参数对象的原型，具体介绍请看后文。</p> <p>读取对象的某个属性时，JavaScript 引擎先寻找对象本身的属性，如果找不到，就到它的原型去找，如果还是找不到，就到原型的原型去找。如果直到最顶层的<code>Object.prototype</code>还是找不到，则返回<code>undefined</code>。如果对象自身和它的原型，都定义了一个同名属性，那么优先读取对象自身的属性，这叫做“覆盖”（overriding）。</p> <p>注意，一级级向上，在整个原型链上寻找某个属性，对性能是有影响的。所寻找的属性在越上层的原型对象，对性能的影响越大。如果寻找某个不存在的属性，将会遍历整个原型链。</p> <p>举例来说，如果让构造函数的<code>prototype</code>属性指向一个数组，就意味着实例对象可以调用数组方法。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token function-variable function">MyArray</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">MyArray</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">MyArray</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> MyArray<span class="token punctuation">;</span>

<span class="token keyword">var</span> mine <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mine<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mine<span class="token punctuation">.</span>length <span class="token comment">// 3</span>
mine <span class="token keyword">instanceof</span> <span class="token class-name">Array</span> <span class="token comment">// true</span>
</code></pre></div><p>上面代码中，<code>mine</code>是构造函数<code>MyArray</code>的实例对象，由于<code>MyArray.prototype</code>指向一个数组实例，使得<code>mine</code>可以调用数组方法（这些方法定义在数组实例的<code>prototype</code>对象上面）。最后那行<code>instanceof</code>表达式，用来比较一个对象是否为某个构造函数的实例，结果就是证明<code>mine</code>为<code>Array</code>的实例，<code>instanceof</code>运算符的详细解释详见后文。</p> <p>上面代码还出现了原型对象的<code>constructor</code>属性，这个属性的含义下一节就来解释。</p> <h3 id="constructor-属性"><a href="#constructor-属性" class="header-anchor">#</a> constructor 属性</h3> <p><code>prototype</code>对象有一个<code>constructor</code>属性，默认指向<code>prototype</code>对象所在的构造函数。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token constant">P</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token class-name">P</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">===</span> <span class="token constant">P</span> <span class="token comment">// true</span>
</code></pre></div><p>由于<code>constructor</code>属性定义在<code>prototype</code>对象上面，意味着可以被所有实例对象继承。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token constant">P</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">P</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

p<span class="token punctuation">.</span>constructor <span class="token operator">===</span> <span class="token constant">P</span> <span class="token comment">// true</span>
p<span class="token punctuation">.</span>constructor <span class="token operator">===</span> <span class="token class-name">P</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token comment">// true</span>
p<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">'constructor'</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre></div><p>上面代码中，<code>p</code>是构造函数<code>P</code>的实例对象，但是<code>p</code>自身没有<code>constructor</code>属性，该属性其实是读取原型链上面的<code>P.prototype.constructor</code>属性。</p> <p><code>constructor</code>属性的作用是，可以得知某个实例对象，到底是哪一个构造函数产生的。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token constant">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

f<span class="token punctuation">.</span>constructor <span class="token operator">===</span> <span class="token constant">F</span> <span class="token comment">// true</span>
f<span class="token punctuation">.</span>constructor <span class="token operator">===</span> RegExp <span class="token comment">// false</span>
</code></pre></div><p>上面代码中，<code>constructor</code>属性确定了实例对象<code>f</code>的构造函数是<code>F</code>，而不是<code>RegExp</code>。</p> <p>另一方面，有了<code>constructor</code>属性，就可以从一个实例对象新建另一个实例。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Constr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Constr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> y <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">x<span class="token punctuation">.</span>constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
y <span class="token keyword">instanceof</span> <span class="token class-name">Constr</span> <span class="token comment">// true</span>
</code></pre></div><p>上面代码中，<code>x</code>是构造函数<code>Constr</code>的实例，可以从<code>x.constructor</code>间接调用构造函数。这使得在实例方法中，调用自身的构造函数成为可能。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Constr</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">createCopy</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">this<span class="token punctuation">.</span>constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>上面代码中，<code>createCopy</code>方法调用构造函数，新建另一个实例。</p> <p><code>constructor</code>属性表示原型对象与构造函数之间的关联关系，如果修改了原型对象，一般会同时修改<code>constructor</code>属性，防止引用的时候出错。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Person <span class="token comment">// true</span>

<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">method</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Person <span class="token comment">// false</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Object <span class="token comment">// true</span>
</code></pre></div><p>上面代码中，构造函数<code>Person</code>的原型对象改掉了，但是没有修改<code>constructor</code>属性，导致这个属性不再指向<code>Person</code>。由于<code>Person</code>的新原型是一个普通对象，而普通对象的<code>constructor</code>属性指向<code>Object</code>构造函数，导致<code>Person.prototype.constructor</code>变成了<code>Object</code>。</p> <p>所以，修改原型对象时，一般要同时修改<code>constructor</code>属性的指向。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 坏的写法</span>
<span class="token class-name">C</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">method1</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 好的写法</span>
<span class="token class-name">C</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
  constructor<span class="token operator">:</span> <span class="token constant">C</span><span class="token punctuation">,</span>
  <span class="token function-variable function">method1</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 更好的写法</span>
<span class="token class-name">C</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">method1</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>上面代码中，要么将<code>constructor</code>属性重新指向原来的构造函数，要么只在原型对象上添加方法，这样可以保证<code>instanceof</code>运算符不会失真。</p> <p>如果不能确定<code>constructor</code>属性是什么函数，还有一个办法：通过<code>name</code>属性，从实例得到构造函数的名称。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
f<span class="token punctuation">.</span>constructor<span class="token punctuation">.</span>name <span class="token comment">// &quot;Foo&quot;</span>
</code></pre></div><h2 id="instanceof-运算符"><a href="#instanceof-运算符" class="header-anchor">#</a> instanceof 运算符</h2> <p><code>instanceof</code>运算符返回一个布尔值，表示对象是否为某个构造函数的实例。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> v <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vehicle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
v <span class="token keyword">instanceof</span> <span class="token class-name">Vehicle</span> <span class="token comment">// true</span>
</code></pre></div><p>上面代码中，对象<code>v</code>是构造函数<code>Vehicle</code>的实例，所以返回<code>true</code>。</p> <p><code>instanceof</code>运算符的左边是实例对象，右边是构造函数。它会检查右边构造函数的原型对象（prototype），是否在左边对象的原型链上。因此，下面两种写法是等价的。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>v <span class="token keyword">instanceof</span> <span class="token class-name">Vehicle</span>
<span class="token comment">// 等同于</span>
<span class="token class-name">Vehicle</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">isPrototypeOf</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span>
</code></pre></div><p>上面代码中，<code>Vehicle</code>是对象<code>v</code>的构造函数，它的原型对象是<code>Vehicle.prototype</code>，<code>isPrototypeOf()</code>方法是 JavaScript 提供的原生方法，用于检查某个对象是否为另一个对象的原型，详细解释见后文。</p> <p>由于<code>instanceof</code>检查整个原型链，因此同一个实例对象，可能会对多个构造函数都返回<code>true</code>。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
d <span class="token keyword">instanceof</span> <span class="token class-name">Date</span> <span class="token comment">// true</span>
d <span class="token keyword">instanceof</span> <span class="token class-name">Object</span> <span class="token comment">// true</span>
</code></pre></div><p>上面代码中，<code>d</code>同时是<code>Date</code>和<code>Object</code>的实例，因此对这两个构造函数都返回<code>true</code>。</p> <p>由于任意对象（除了<code>null</code>）都是<code>Object</code>的实例，所以<code>instanceof</code>运算符可以判断一个值是否为非<code>null</code>的对象。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token number">123</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
obj <span class="token keyword">instanceof</span> <span class="token class-name">Object</span> <span class="token comment">// true</span>

<span class="token keyword">null</span> <span class="token keyword">instanceof</span> <span class="token class-name">Object</span> <span class="token comment">// false</span>
</code></pre></div><p>上面代码中，除了<code>null</code>，其他对象的<code>instanceOf Object</code>的运算结果都是<code>true</code>。</p> <p><code>instanceof</code>的原理是检查右边构造函数的<code>prototype</code>属性，是否在左边对象的原型链上。有一种特殊情况，就是左边对象的原型链上，只有<code>null</code>对象。这时，<code>instanceof</code>判断会失真。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">typeof</span> obj <span class="token comment">// &quot;object&quot;</span>
obj <span class="token keyword">instanceof</span> <span class="token class-name">Object</span> <span class="token comment">// false</span>
</code></pre></div><p>上面代码中，<code>Object.create(null)</code>返回一个新对象<code>obj</code>，它的原型是<code>null</code>（<code>Object.create()</code>的详细介绍见后文）。右边的构造函数<code>Object</code>的<code>prototype</code>属性，不在左边的原型链上，因此<code>instanceof</code>就认为<code>obj</code>不是<code>Object</code>的实例。这是唯一的<code>instanceof</code>运算符判断会失真的情况（一个对象的原型是<code>null</code>）。</p> <p><code>instanceof</code>运算符的一个用处，是判断值的类型。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> y <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
x <span class="token keyword">instanceof</span> <span class="token class-name">Array</span> <span class="token comment">// true</span>
y <span class="token keyword">instanceof</span> <span class="token class-name">Object</span> <span class="token comment">// true</span>
</code></pre></div><p>上面代码中，<code>instanceof</code>运算符判断，变量<code>x</code>是数组，变量<code>y</code>是对象。</p> <p>注意，<code>instanceof</code>运算符只能用于对象，不适用原始类型的值。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token string">'hello'</span><span class="token punctuation">;</span>
s <span class="token keyword">instanceof</span> <span class="token class-name">String</span> <span class="token comment">// false</span>
</code></pre></div><p>上面代码中，字符串不是<code>String</code>对象的实例（因为字符串不是对象），所以返回<code>false</code>。</p> <p>此外，对于<code>undefined</code>和<code>null</code>，<code>instanceof</code>运算符总是返回<code>false</code>。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">undefined</span> <span class="token keyword">instanceof</span> <span class="token class-name">Object</span> <span class="token comment">// false</span>
<span class="token keyword">null</span> <span class="token keyword">instanceof</span> <span class="token class-name">Object</span> <span class="token comment">// false</span>
</code></pre></div><p>利用<code>instanceof</code>运算符，还可以巧妙地解决，调用构造函数时，忘了加<code>new</code>命令的问题。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Fubar</span> <span class="token punctuation">(</span><span class="token parameter">foo<span class="token punctuation">,</span> bar</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">Fubar</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_foo <span class="token operator">=</span> foo<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_bar <span class="token operator">=</span> bar<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Fubar</span><span class="token punctuation">(</span>foo<span class="token punctuation">,</span> bar<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>上面代码使用<code>instanceof</code>运算符，在函数体内部判断<code>this</code>关键字是否为构造函数<code>Fubar</code>的实例。如果不是，就表明忘了加<code>new</code>命令。</p> <h2 id="构造函数的继承"><a href="#构造函数的继承" class="header-anchor">#</a> 构造函数的继承</h2> <p>让一个构造函数继承另一个构造函数，是非常常见的需求。这可以分成两步实现。第一步是在子类的构造函数中，调用父类的构造函数。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Sub</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">Super</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>prop <span class="token operator">=</span> value<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>上面代码中，<code>Sub</code>是子类的构造函数，<code>this</code>是子类的实例。在实例上调用父类的构造函数<code>Super</code>，就会让子类实例具有父类实例的属性。</p> <p>第二步，是让子类的原型指向父类的原型，这样子类就可以继承父类原型。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Sub</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Super</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Sub</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Sub<span class="token punctuation">;</span>
<span class="token class-name">Sub</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>method <span class="token operator">=</span> <span class="token string">'...'</span><span class="token punctuation">;</span>
</code></pre></div><p>上面代码中，<code>Sub.prototype</code>是子类的原型，要将它赋值为<code>Object.create(Super.prototype)</code>，而不是直接等于<code>Super.prototype</code>。否则后面两行对<code>Sub.prototype</code>的操作，会连父类的原型<code>Super.prototype</code>一起修改掉。</p> <p>另外一种写法是<code>Sub.prototype</code>等于一个父类实例。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Sub</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>上面这种写法也有继承的效果，但是子类会具有父类实例的方法。有时，这可能不是我们需要的，所以不推荐使用这种写法。</p> <p>举例来说，下面是一个<code>Shape</code>构造函数。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Shape</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">Shape</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">move</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">+=</span> x<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">+=</span> y<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'Shape moved.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>我们需要让<code>Rectangle</code>构造函数继承<code>Shape</code>。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 第一步，子类继承父类的实例</span>
<span class="token keyword">function</span> <span class="token function">Rectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">Shape</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 调用父类构造函数</span>
<span class="token punctuation">}</span>
<span class="token comment">// 另一种写法</span>
<span class="token keyword">function</span> <span class="token function">Rectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>base <span class="token operator">=</span> Shape<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">base</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 第二步，子类继承父类的原型</span>
<span class="token class-name">Rectangle</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Shape</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Rectangle</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Rectangle<span class="token punctuation">;</span>
</code></pre></div><p>采用这样的写法以后，<code>instanceof</code>运算符会对子类和父类的构造函数，都返回<code>true</code>。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> rect <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

rect <span class="token keyword">instanceof</span> <span class="token class-name">Rectangle</span>  <span class="token comment">// true</span>
rect <span class="token keyword">instanceof</span> <span class="token class-name">Shape</span>  <span class="token comment">// true</span>
</code></pre></div><p>上面代码中，子类是整体继承父类。有时只需要单个方法的继承，这时可以采用下面的写法。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">ClassB</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">print</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">ClassA</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// some code</span>
<span class="token punctuation">}</span>
</code></pre></div><p>上面代码中，子类<code>B</code>的<code>print</code>方法先调用父类<code>A</code>的<code>print</code>方法，再部署自己的代码。这就等于继承了父类<code>A</code>的<code>print</code>方法。</p> <h2 id="多重继承"><a href="#多重继承" class="header-anchor">#</a> 多重继承</h2> <p>JavaScript 不提供多重继承功能，即不允许一个对象同时继承多个对象。但是，可以通过变通方法，实现这个功能。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token constant">M1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>hello <span class="token operator">=</span> <span class="token string">'hello'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token constant">M2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>world <span class="token operator">=</span> <span class="token string">'world'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token constant">S</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token constant">M1</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token constant">M2</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 继承 M1</span>
<span class="token class-name">S</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">M1</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 继承链上加入 M2</span>
Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token class-name">S</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token class-name">M2</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 指定构造函数</span>
<span class="token class-name">S</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> <span class="token constant">S</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">S</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
s<span class="token punctuation">.</span>hello <span class="token comment">// 'hello'</span>
s<span class="token punctuation">.</span>world <span class="token comment">// 'world'</span>
</code></pre></div><p>上面代码中，子类<code>S</code>同时继承了父类<code>M1</code>和<code>M2</code>。这种模式又称为 Mixin（混入）。</p> <h2 id="模块"><a href="#模块" class="header-anchor">#</a> 模块</h2> <p>随着网站逐渐变成“互联网应用程序”，嵌入网页的 JavaScript 代码越来越庞大，越来越复杂。网页越来越像桌面程序，需要一个团队分工协作、进度管理、单元测试等等……开发者必须使用软件工程的方法，管理网页的业务逻辑。</p> <p>JavaScript 模块化编程，已经成为一个迫切的需求。理想情况下，开发者只需要实现核心的业务逻辑，其他都可以加载别人已经写好的模块。</p> <p>但是，JavaScript 不是一种模块化编程语言，ES6 才开始支持“类”和“模块”。下面介绍传统的做法，如何利用对象实现模块的效果。</p> <h3 id="基本的实现方法"><a href="#基本的实现方法" class="header-anchor">#</a> 基本的实现方法</h3> <p>模块是实现特定功能的一组属性和方法的封装。</p> <p>简单的做法是把模块写成一个对象，所有的模块成员都放到这个对象里面。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> module1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
　_count <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
　<span class="token function-variable function">m1</span> <span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
　　<span class="token comment">//...</span>
　<span class="token punctuation">}</span><span class="token punctuation">,</span>
　<span class="token function-variable function">m2</span> <span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  　<span class="token comment">//...</span>
　<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>上面的函数<code>m1</code>和<code>m2</code>，都封装在<code>module1</code>对象里。使用的时候，就是调用这个对象的属性。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module1<span class="token punctuation">.</span><span class="token function">m1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>但是，这样的写法会暴露所有模块成员，内部状态可以被外部改写。比如，外部代码可以直接改变内部计数器的值。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module1<span class="token punctuation">.</span>_count <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="封装私有变量-构造函数的写法"><a href="#封装私有变量-构造函数的写法" class="header-anchor">#</a> 封装私有变量：构造函数的写法</h3> <p>我们可以利用构造函数，封装私有变量。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> buffer <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     buffer<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">toString</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> buffer<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre></div><p>上面代码中，<code>buffer</code>是模块的私有变量。一旦生成实例对象，外部是无法直接访问<code>buffer</code>的。但是，这种方法将私有变量封装在构造函数中，导致构造函数与实例对象是一体的，总是存在于内存之中，无法在使用完成后清除。这意味着，构造函数有双重作用，既用来塑造实例对象，又用来保存实例对象的数据，违背了构造函数与实例对象在数据上相分离的原则（即实例对象的数据，不应该保存在实例对象以外）。同时，非常耗费内存。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>_buffer <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">StringBuilder</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
  constructor<span class="token operator">:</span> StringBuilder<span class="token punctuation">,</span>
  <span class="token function-variable function">add</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_buffer<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">toString</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_buffer<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>这种方法将私有变量放入实例对象中，好处是看上去更自然，但是它的私有变量可以从外部读写，不是很安全。</p> <h3 id="封装私有变量-立即执行函数的写法"><a href="#封装私有变量-立即执行函数的写法" class="header-anchor">#</a> 封装私有变量：立即执行函数的写法</h3> <p>另一种做法是使用“立即执行函数”（Immediately-Invoked Function Expression，IIFE），将相关的属性和方法封装在一个函数作用域里面，可以达到不暴露私有成员的目的。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> module1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
　<span class="token keyword">var</span> _count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
　<span class="token keyword">var</span> <span class="token function-variable function">m1</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
　  <span class="token comment">//...</span>
　<span class="token punctuation">}</span><span class="token punctuation">;</span>
　<span class="token keyword">var</span> <span class="token function-variable function">m2</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
　　<span class="token comment">//...</span>
　<span class="token punctuation">}</span><span class="token punctuation">;</span>
　<span class="token keyword">return</span> <span class="token punctuation">{</span>
　　m1 <span class="token operator">:</span> m1<span class="token punctuation">,</span>
　　m2 <span class="token operator">:</span> m2
　<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>使用上面的写法，外部代码无法读取内部的<code>_count</code>变量。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>module1<span class="token punctuation">.</span>_count<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//undefined</span>
</code></pre></div><p>上面的<code>module1</code>就是 JavaScript 模块的基本写法。下面，再对这种写法进行加工。</p> <h3 id="模块的放大模式"><a href="#模块的放大模式" class="header-anchor">#</a> 模块的放大模式</h3> <p>如果一个模块很大，必须分成几个部分，或者一个模块需要继承另一个模块，这时就有必要采用“放大模式”（augmentation）。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> module1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">mod</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
　mod<span class="token punctuation">.</span><span class="token function-variable function">m3</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
　　<span class="token comment">//...</span>
　<span class="token punctuation">}</span><span class="token punctuation">;</span>
　<span class="token keyword">return</span> mod<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>module1<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>上面的代码为<code>module1</code>模块添加了一个新方法<code>m3()</code>，然后返回新的<code>module1</code>模块。</p> <p>在浏览器环境中，模块的各个部分通常都是从网上获取的，有时无法知道哪个部分会先加载。如果采用上面的写法，第一个执行的部分有可能加载一个不存在空对象，这时就要采用&quot;宽放大模式&quot;（Loose augmentation）。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> module1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">mod</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
　<span class="token comment">//...</span>
　<span class="token keyword">return</span> mod<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>module1 <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>与&quot;放大模式&quot;相比，“宽放大模式”就是“立即执行函数”的参数可以是空对象。</p> <h3 id="输入全局变量"><a href="#输入全局变量" class="header-anchor">#</a> 输入全局变量</h3> <p>独立性是模块的重要特点，模块内部最好不与程序的其他部分直接交互。</p> <p>为了在模块内部调用全局变量，必须显式地将其他变量输入模块。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> module1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">$<span class="token punctuation">,</span> <span class="token constant">YAHOO</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
　<span class="token comment">//...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">,</span> <span class="token constant">YAHOO</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>上面的<code>module1</code>模块需要使用 jQuery 库和 YUI 库，就把这两个库（其实是两个模块）当作参数输入<code>module1</code>。这样做除了保证模块的独立性，还使得模块之间的依赖关系变得明显。</p> <p>立即执行函数还可以起到命名空间的作用。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">$<span class="token punctuation">,</span> window<span class="token punctuation">,</span> document</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token keyword">function</span> <span class="token function">go</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">handleEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">dieCarouselDie</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>

  <span class="token comment">//attach to the global scope</span>
  window<span class="token punctuation">.</span>finalCarousel <span class="token operator">=</span> <span class="token punctuation">{</span>
    init <span class="token operator">:</span> initialize<span class="token punctuation">,</span>
    destroy <span class="token operator">:</span> dieCarouselDie
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span> jQuery<span class="token punctuation">,</span> window<span class="token punctuation">,</span> document <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>上面代码中，<code>finalCarousel</code>对象输出到全局，对外暴露<code>init</code>和<code>destroy</code>接口，内部方法<code>go</code>、<code>handleEvents</code>、<code>initialize</code>、<code>dieCarouselDie</code>都是外部无法调用的。</p> <h2 id="参考链接"><a href="#参考链接" class="header-anchor">#</a> 参考链接</h2> <ul><li><a href="https://medium.freecodecamp.com/javascript-modules-a-beginner-s-guide-783f7d7a5fcc" target="_blank" rel="noopener noreferrer">JavaScript Modules: A Beginner’s Guide<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, by Preethi Kasireddy</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2021-07-20 14:30</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" class="bi bi-chevron-left"><path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"></path></svg> <a href="/wangdoc/js/oop/this.html" class="prev">
        this 关键字
      </a></span> <span class="next"><a href="/wangdoc/js/oop/object.html">
        Object 对象的相关方法
      </a> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" class="bi bi-chevron-right"><path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"></path></svg></span></p></div> </main></div></div></div><div class="tulp-scrollbar__bar is-horizontal"><div class="tulp-scrollbar__thumb" style="width:0;transform:translateX(0%);ms-transform:translateX(0%);webkit-transform:translateX(0%);"></div></div><div class="tulp-scrollbar__bar is-vertical"><div class="tulp-scrollbar__thumb" style="height:0;transform:translateY(0%);ms-transform:translateY(0%);webkit-transform:translateY(0%);"></div></div></div><div class="global-ui"><!----></div></div>
    <script src="/wangdoc/assets/js/app.8723d088.js" defer></script><script src="/wangdoc/assets/js/2.9a1a264e.js" defer></script><script src="/wangdoc/assets/js/195.ee0924e6.js" defer></script><script src="/wangdoc/assets/js/3.59361ec6.js" defer></script>
  </body>
</html>
